/*!CK:696697832!*//*1416324530,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["XpHre"]); }

__d("PUWErrorCodes",[],function(a,b,c,d,e,f){e.exports={BAD_JPEG:9901,WORKER_TERMINATED:9902,UNKNOWN_RESIZE_ERROR:9903,WORKER_ABORT:9904};},null);
__d("StickerAssetType",[],function(a,b,c,d,e,f){e.exports={IMAGE:"BestEffortImage",SPRITE:"SpriteImage",PADDED_SPRITE:"PaddedSpriteImage"};},null);
__d("TypingDetector",["ArbiterMixin","Event","Input","Run","TypingStates","copyProperties","createObjectFrom","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(p,q){this._input=p;this._ignoreKeys={};this._getValueFn=q;}l(o.prototype,g,{_timeout:7000,_currentState:k.INACTIVE,init:function(){this.init=n;this.reset();h.listen(this._input,'keyup',this._update.bind(this));j.onUnload(this._onunload.bind(this));},reset:function(){clearTimeout(this._checkTimer);this._checkTimer=null;this._lastKeystrokeAt=null;this._currentState=k.INACTIVE;},setIgnoreKeys:function(p){this._ignoreKeys=m(p);},_onunload:function(){if(this._currentState==k.TYPING)this._transition(k.QUITTING);},_update:function(event){var p=h.getKeyCode(event),q=this._currentState;if(!this._ignoreKeys[p]){var r=this._getValueFn?this._getValueFn():i.getValue(this._input);if(r.trim().length===0){if(q==k.TYPING)this._transition(k.INACTIVE);}else if(q==k.TYPING){this._recordKeystroke();}else if(q==k.INACTIVE){this._transition(k.TYPING);this._recordKeystroke();}}},_transition:function(p){this.reset();this._currentState=p;this.inform('change',p);},_recordKeystroke:function(){this._lastKeystrokeTime=Date.now();if(!this._checkTimer)this._checkTimer=setTimeout(this._checkTyping.bind(this),this._timeout);},_checkTyping:function(){var p=this._lastKeystrokeTime+this._timeout,q=Date.now();if(q>p){this._transition(k.INACTIVE);}else{clearTimeout(this._checkTimer);this._checkTimer=setTimeout(this._checkTyping.bind(this),p-q+10);}}});e.exports=o;},null);
__d("TypingDetectorController",["AsyncRequest","AvailableList","AvailableListConstants","ChannelConnection","ChatVisibility","Keys","PresencePrivacy","ShortProfiles","TypingDetector","TypingStates","copyProperties","emptyFunction","setTimeoutAcrossTransitions","shield"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){function u(w){if(!k.isOnline())return false;if(w){var x=n.getNow(w);return x&&x.type=="friend"&&m.allows(w);}return true;}function v(w,x,y,z,aa,ba){"use strict";this.userID=w;this.input=x;this.source=y;this.threadID=aa;this.remoteState=p.INACTIVE;this.notifyTimer=null;z=z||{};this.notifyDelay=z.notifyDelay||this.notifyDelay;this._typingDetector=new o(x,ba);this._typingDetector.init(z);this._typingDetector.subscribe('change',this._stateChange.bind(this));}v.prototype.setUserAndThread=function(w,x){"use strict";if(this.userID!==w||this.threadID!==x){this.resetState();this.userID=w;this.threadID=x;}};v.prototype.setIgnoreEnter=function(w){"use strict";var x=w?[l.RETURN]:[];this._typingDetector.setIgnoreKeys(x);};v.prototype.resetState=function(){"use strict";this._notifyState(p.INACTIVE);this.remoteState=p.INACTIVE;this._typingDetector.reset();clearTimeout(this.notifyTimer);this.notifyTimer=null;};v.prototype._stateChange=function(w,x){"use strict";if(x!=p.QUITTING){clearTimeout(this.notifyTimer);this.notifyTimer=s(t(this._notifyState,this,x),this.notifyDelay);}else this._notifyState(x,true);};v.prototype._notifyState=function(w,x){"use strict";if(!this.userID&&!this.threadID)return;var y=this.userID,z=u(y);if(z&&w!=this.remoteState){this.remoteState=w;if(j.disconnected())return;var aa={typ:w,to:y,source:this.source,thread:this.threadID};new g().setHandler(this._onTypResponse.bind(this,y)).setErrorHandler(r).setData(aa).setURI('/ajax/messaging/typ.php').setAllowCrossPageTransition(true).setOption('asynchronous',!x).send();}};v.prototype._onTypResponse=function(w,x){"use strict";var y=x.getPayload()||{};if(y.offline)h.set(w,i.OFFLINE,'typing_response');};q(v.prototype,{notifyDelay:1000});e.exports=v;},null);
__d("CroppedImage.react",["Image.react","React","ReactPropTypes","cx"],function(a,b,c,d,e,f,g,h,i,j){var k=h.createClass({displayName:"CroppedImage",propTypes:{center:i.shape({x:i.number.isRequired,y:i.number.isRequired}),crop:i.shape({height:i.number.isRequired,width:i.number.isRequired}).isRequired,size:i.shape({height:i.number.isRequired,width:i.number.isRequired}).isRequired,src:i.string.isRequired},getDefaultProps:function(){return {center:{x:.5,y:.5}};},_calculateMargin:function(l,m,n){return -1*Math.max(Math.min(((n*m)-(.5*l)),m-l),0);},render:function(){var l=this._calculateMargin(this.props.crop.width,this.props.size.width,this.props.center.x),m=this._calculateMargin(this.props.crop.height,this.props.size.height,this.props.center.y),n={left:l,height:this.props.size.height,top:m,width:this.props.size.width};return (h.createElement("div",{className:"_46-h",style:this.props.crop},h.createElement(g,{alt:this.props.alt||'',className:"_46-i",src:this.props.src,style:n})));}});e.exports=k;},null);
__d("MercuryMessageError.react",["CurrentUser","ImmutableObject","MercuryErrorInfo","MercuryMessages","React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){'use strict';var n=k.PropTypes,o=k.createClass({displayName:"MercuryMessageError",propTypes:{authorFBID:n.string,message:n.instanceOf(h).isRequired},getDefaultProps:function(){return {authorFBID:g.getID()};},render:function(){var p=this.props.message,q=p.error_data;return (k.createElement("div",k.__spread({},this.props,{className:m(this.props.className,this._getClassNameFromStatus(p)),tabIndex:i.isTransient(q)?0:null,onClick:i.isTransient(q)?this.messageResend:null}),k.createElement("div",{className:"_2fs1"}),k.createElement("span",{dangerouslySetInnerHTML:{__html:this._getTextFromStatus(p)}})));},messageResend:function(){j.getForFBID(this.props.authorFBID).resendMessage(this.props.message);},_getClassNameFromStatus:function(p){if(i.hasErrorStatus(p)){return (("_2fs2")+(' '+"_2fs3")+(i.isTransient(p.error_data)?' '+"_2fs4":'')+(i.isPermanent(p.error_data)?' '+"_2fs5":''));}else return "_2fs6 _2fs2";},_getTextFromStatus:function(p){var q='',r=p.error_data;if(i.hasErrorStatus(p))q=i.getMessage(r);if(typeof q==='object'&&q.__html)q=q.__html;return q;}});e.exports=o;},null);
__d("MercuryAudioPlayer",["Event","Arbiter","DOM","Flash","UserAgent_DEPRECATED","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=200;function n(){if(k.webkit()&&!k.chrome())return false;var w=i.create('audio'),x=false;try{if(!!w.canPlayType)if(w.canPlayType('video/mp4;').replace(/^no$/,''))x=true;}finally{return x;}}function o(){return j.isAvailable();}var p=function(){this.interval=null;this.arbiterInstance=null;this.audio=i.create('audio');g.listen(this.audio,'playing',function(){this.informAttachment('playing',this.audio.currentTime);this.interval=setInterval(function(){this.informAttachment('playing',this.audio.currentTime);}.bind(this),m);}.bind(this));g.listen(this.audio,'ended',function(){clearInterval(this.interval);this.informAttachment('finished');}.bind(this));};l(p.prototype,{setAudio:function(w,x){this.audio.setAttribute('src',w);this.arbiterInstance=x;},informAttachment:function(w,x){if(this.arbiterInstance)this.arbiterInstance.inform(w,x);},play:function(){this.audio.play();this.informAttachment('played');},resume:function(){this.audio.play();this.informAttachment('played');},pause:function(){this.audio.pause();clearInterval(this.interval);this.informAttachment('paused');},getType:function(){return 'html5';}});var q=function(){this.src=null;this.arbiterInstance=null;var w=i.create('div');document.body.appendChild(w);this.swf=j.embed('/swf/SoundStreamPlayer.swf',w,null,{});this.interval=null;h.subscribe('soundstream/finished',function(){clearInterval(this.interval);this.informAttachment('finished');}.bind(this));};l(q.prototype,{setAudio:function(w,x){this.src=w;this.arbiterInstance=x;},informAttachment:function(w,x){if(this.arbiterInstance)this.arbiterInstance.inform(w,x);},play:function(){this.swf.playSound(this.src);this.interval=setInterval(function(){var w=this.swf.getCurrentTime();this.informAttachment('playing',w);}.bind(this),m);this.informAttachment('played');},resume:function(){this.swf.resume();this.informAttachment('played');},pause:function(){clearInterval(this.interval);this.swf.pause();this.informAttachment('paused');},getType:function(){return 'flash';}});function r(){if(n()){return new p();}else if(o())return new q();return false;}var s=null,t=null,u=0;function v(w,x){this.src=w;this.arbiterInstance=x;this.audio_id=++u;s!==null||(s=r());if(!s)return false;}l(v.prototype,{getType:function(){if(!s){return false;}else return s.getType();},play:function(w){if(w&&t==this.audio_id){s.resume();}else{this.pause();t=this.audio_id;s.setAudio(this.src,this.arbiterInstance);s.play();}},pause:function(){s.pause();}});e.exports=v;},null);
__d("MercuryAttachmentAudioClip.react",["Arbiter","ArbiterMixin","MercuryAudioPlayer","CurrentUser","JSLogger","LeftRight.react","React","cx","shield","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q='MercuryAttachmentAudioClip/play',r=k.create('mercury_audio_clip'),s=m.createClass({displayName:"AudioClip",mixins:[h],getInitialState:function(){this.subscribe('playing',this.updateTime);this.subscribe('played',o(this.setState,this,{playing:true,started:true}));this.subscribe('paused',o(this.setState,this,{playing:false}));this.subscribe('finished',o(this.setState,this,{playing:false,started:false,time:this.props.duration}));this.logged=false;var t=this.props.downloadOnly?false:new i(this.props.src,this);g.subscribe(q,function(u,v){if(this.props.src!=v)this.setState({time:0});}.bind(this));return {time:0,playing:false,started:false,duration:this.props.duration,audioPlayer:t};},updateTime:function(t,u){this.setState({time:u});},play:function(){if(this.state.playing){this.state.audioPlayer.pause();}else{this.state.audioPlayer.play(this.state.started);g.inform(q,this.props.src);if(!this.logged){this.logged=true;r.log('play',{uid:j.getID(),duration:this.props.duration});}}},_formatSeconds:function(t){if(t){t=Math.ceil(t);var u=t%60;if(u<10)u='0'+u;var v=Math.floor(t/60);return v+':'+u;}else return null;},_renderPlayer:function(t,u){return (m.createElement("a",{className:"_1miz",href:"#",style:{width:t},onClick:this.play},m.createElement("span",{className:"_1mi-"},m.createElement("i",{className:"_1mi_"})),m.createElement("span",{className:"_1mj0"},u),m.createElement("div",{className:"_1mj1"})));},render:function(){var t=this.state.time,u=this.state.playing,v=this._formatSeconds(this.state.duration),w=this.props.width||170,x=null,y=Math.ceil((t*(w+2))/this.state.duration);if(this.state.audioPlayer&&this.state.audioPlayer.getType()){var z=this._renderPlayer(w,v),aa=this._renderPlayer(w,v),ba=(("_1mj2")+(u&&(t!==0)?' '+"_1mj3":'')+(u&&(t===0)?' '+"_4g4x":''));x=(m.createElement("div",{className:ba},z,m.createElement("div",{className:"_1mj4",style:{width:y}},aa)));}else x=(m.createElement("div",{className:"_1mj2"},m.createElement("div",{className:"_1miz"},m.createElement(l,null,m.createElement("a",{className:"_1mj5",href:this.props.src},m.createElement("span",{className:"_3qi6"},m.createElement("i",{className:"_1mj6"})),m.createElement("span",{className:"_1mj7"},"\u0e02\u0e49\u0e2d\u0e04\u0e27\u0e32\u0e21\u0e40\u0e2a\u0e35\u0e22\u0e07"),m.createElement("span",{className:"_1mj8"},v)),m.createElement("a",{href:this.props.src,className:"_1mj9"},m.createElement("i",{className:"_1mja"}))))));return (m.createElement("div",{className:"_1mjb"},x));}});e.exports=s;},null);
__d("XMessagingVideoAttachmentControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f){e.exports=b("XControllerURIBuilder").create("\/mercury\/attachments\/video\/",{video_id:{type:"Int",required:true},window_width:{type:"Int",required:true},window_height:{type:"Int",required:true}});},null);
__d("MercuryAttachmentVideo.react",["ActorURI","CroppedImage.react","Image.react","React","ReactPropTypes","XMessagingVideoAttachmentControllerURIBuilder","cx","getViewportDimensions","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=j.createClass({displayName:"MercuryAttachmentVideo",propTypes:{duration:k.number.isRequired,name:k.string.isRequired,pageID:k.number,size:k.shape({height:k.number,width:k.number}),thumbnailSize:k.shape({height:k.number,width:k.number}),thumbnail:k.string,videoID:k.string},_formatDuration:function(){var q=this.props.duration,r=Math.floor(q/60),s=q%60;if(s<10)return r+':0'+s;return r+':'+s;},render:function(){var q=!!this.props.thumbnail,r=(("_zow")+(' '+"_59go")+(!q?' '+"_59gq":'')),s=((!q?"_3l6h":'')+(!q?' '+"uiIconText":'')),t=n(),u=new l().setInt('video_id',this.props.videoID).setInt('window_width',t.width).setInt('window_height',t.height).getURI();if(this.props.pageID)u=g.create(u,this.props.pageID);if(this.props.thumbnail)return (j.createElement("div",{className:r,style:this.props.size},j.createElement("a",{className:s,href:u,role:"button",rel:"async"},j.createElement(h,{crop:this.props.size,size:this.props.thumbnailSize,src:this.props.thumbnail}),j.createElement("div",{className:"_zox"}),j.createElement("div",{className:"_zoy"},j.createElement(i,{src:o('/images/chat/chat_play_icon.png')})),j.createElement("span",{className:"_zoz"},this._formatDuration()))));return (j.createElement("div",{className:r},j.createElement("a",{className:s,href:u,role:"button",rel:"async"},j.createElement(i,{src:o('/images/icons/video.gif')}),j.createElement("span",{className:"_59gp"},this.props.name))));}});e.exports=p;},null);
__d("updatePhotoProgressBar",[],function(a,b,c,d,e,f){'use strict';function g(h,event){if(event.loaded!=event.total){h.setPosition(50*event.loaded/event.total);}else{h.setPosition(50);h.setTarget(100,2000);}}e.exports=g;},null);
__d("Emscripten",[],function(a,b,c,d,e,f){e.exports={isSupported:function(){return (typeof Int32Array!=='undefined'&&typeof Float64Array!=='undefined'&&!!new Int32Array(1).subarray&&!!new Int32Array(1).set);}};},null);
__d("XHRHttpError",[],function(a,b,c,d,e,f){var g='HTTP_CLIENT_ERROR',h='HTTP_PROXY_ERROR',i='HTTP_SERVER_ERROR',j='HTTP_TRANSPORT_ERROR',k='HTTP_UNKNOWN_ERROR';function l(m,n){if(n===0){var o=m.getProtocol();if(o==='file'||o==='ftp')return null;return j;}else if(n>=100&&n<200){return h;}else if(n>=200&&n<300){return null;}else if(n>=400&&n<500){return g;}else if(n>=500&&n<600){return i;}else if(n>=12001&&n<12156){return j;}else return k;}e.exports={getErrorCode:l,HTTP_CLIENT_ERROR:g,HTTP_PROXY_ERROR:h,HTTP_SERVER_ERROR:i,HTTP_TRANSPORT_ERROR:j,HTTP_UNKNOWN_ERROR:k};},null);
__d("XHRRequest",["ErrorUtils","URI","XHRHttpError","getSameOriginTransport","invariant","xhrSimpleDataSerializer"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m={errorCode:null,errorMsg:null,errorType:null},n={loadedBytes:null,totalBytes:null};function o(p){"use strict";this.setURI(p);this.setMethod('POST');this.setIsAsynchronous(true);this.setTransportBuilder(j);this.setDataSerializer(l);this.$XHRRequest0=this.$XHRRequest0.bind(this);}o.prototype.setURI=function(p){"use strict";this.$XHRRequest1=new h(p);return this;};o.prototype.getURI=function(){"use strict";return this.$XHRRequest1;};o.prototype.setMethod=function(p){"use strict";this.$XHRRequest2=p;return this;};o.prototype.getMethod=function(){"use strict";return this.$XHRRequest2;};o.prototype.setData=function(p){"use strict";this.$XHRRequest3=p;return this;};o.prototype.getData=function(){"use strict";return this.$XHRRequest3;};o.prototype.setRawData=function(p){"use strict";this.$XHRRequest4=p;return this;};o.prototype.setRequestHeader=function(p,q){"use strict";if(!this.$XHRRequest5)this.$XHRRequest5={};this.$XHRRequest5[p]=q;return this;};o.prototype.setTimeout=function(p){"use strict";this.$XHRRequest6=p;return this;};o.prototype.setResponseHandler=function(p){"use strict";this.$XHRRequest7=p;return this;};o.prototype.setErrorHandler=function(p){"use strict";this.$XHRRequest8=p;return this;};o.prototype.setAbortHandler=function(p){"use strict";this.$XHRRequest9=p;return this;};o.prototype.setTimeoutHandler=function(p){"use strict";this.$XHRRequesta=p;return this;};o.prototype.setUploadProgressHandler=function(p){"use strict";this.$XHRRequestb=p;return this;};o.prototype.setIsAsynchronous=function(p){"use strict";this.$XHRRequestc=p;return this;};o.prototype.setTransportBuilder=function(p){"use strict";this.$XHRRequestd=p;return this;};o.prototype.setDataSerializer=function(p){"use strict";this.$XHRRequeste=p;return this;};o.prototype.send=function(){"use strict";var p=this.$XHRRequest6,q=this.$XHRRequestd(),r=this.getURI();this.$XHRRequestf=q;var s;k(this.$XHRRequest2==='POST'||!this.$XHRRequest4);if(this.$XHRRequest2==='GET'||this.$XHRRequest4){r.addQueryData(this.$XHRRequest3);s=this.$XHRRequest4;}else s=this.$XHRRequeste(this.$XHRRequest3);q.onreadystatechange=this.$XHRRequest0;if(q.upload&&this.$XHRRequestb)q.upload.onprogress=this.$XHRRequestg.bind(this);if(p)this.$XHRRequesth=setTimeout(this.$XHRRequesti.bind(this),p);q.open(this.$XHRRequest2,r.toString(),this.$XHRRequestc);if(this.$XHRRequest5)for(var t in this.$XHRRequest5)q.setRequestHeader(t,this.$XHRRequest5[t]);q.send(s);if(!this.$XHRRequestc)q.onreadystatechange(null,true);};o.prototype.abort=function(){"use strict";this.$XHRRequestj();if(this.$XHRRequest9)g.applyWithGuard(this.$XHRRequest9,null,null,null,'XHRRequest:_abortHandler');};o.prototype.$XHRRequestj=function(){"use strict";var p=this.$XHRRequestf;if(p){p.onreadystatechange=null;p.abort();}this.$XHRRequestk();};o.prototype.$XHRRequesti=function(){"use strict";this.$XHRRequestj();if(this.$XHRRequesta)g.applyWithGuard(this.$XHRRequesta,null,null,null,'XHRRequest:_abortHandler');};o.prototype.$XHRRequest0=function(p,q){"use strict";if(!this.$XHRRequestc&&q!==true)return;var r=this.$XHRRequestf,s=r,t=s.readyState;if(t>=2){var u=t===4,v=this.getURI(),w=i.getErrorCode(v,r.status),x=this.$XHRRequest7;if(w!==null){if(u){m.errorCode=w;m.errorMsg=r.responseText;m.errorType='HTTP';if(this.$XHRRequest8)g.applyWithGuard(this.$XHRRequest8,null,[m],null,'XHRRequest:_errorHandler');}}else if(x){var y=null;if(x.includeHeaders)y=r.getAllResponseHeaders();if(u||(x.parseStreaming&&t===3))g.applyWithGuard(x,null,[r.responseText,y,u],null,'XHRRequest:handler');}if(u)this.$XHRRequestk();}};o.prototype.$XHRRequestg=function(p){"use strict";n.loadedBytes=p.loaded;n.totalBytes=p.total;if(this.$XHRRequestb)g.applyWithGuard(this.$XHRRequestb,null,[n],null,'XHRRequest:_uploadProgressHandler');};o.prototype.$XHRRequestk=function(){"use strict";clearTimeout(this.$XHRRequesth);delete this.$XHRRequestf;};e.exports=o;},null);
__d("WebWorker",["BanzaiLogger","WebWorkerConfig","BlobFactory","EventListener","URI","areSameOrigin","destroyOnUnload","SubscriptionsHandler","XHRRequest","arrayContains","emptyFunction","getCrossOriginTransport","performanceNow","invariant","memoize","merge","filterObject"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){var x=a.URL||a.webkitURL;function y(ea){"use strict";this.$WebWorker0=false;this.$WebWorker1=null;this.$WebWorker2=ea;this.$WebWorker3=null;this.$WebWorker4=q;this.$WebWorker5=q;this.$WebWorker6=[];this.$WebWorker7=false;this.$WebWorker8=new n();m(function(){if(!this.$WebWorker7)this.terminate();}.bind(this));this.$WebWorker9('constructed');}y.prototype.setMessageHandler=function(ea){"use strict";this.$WebWorker4=ea||q;return this;};y.prototype.setErrorHandler=function(ea){"use strict";this.$WebWorker5=ea||q;return this;};y.prototype.postMessage=function(ea,fa){"use strict";t(!this.isCurrentState('constructed'));t(!this.isCurrentState('terminated'));if(this.isCurrentState('preparing')){this.$WebWorker6.push(this.postMessage.bind(this,ea,fa));return this;}var ga={type:'message',message:ea};if(fa){this.$WebWorker3.postMessage(ga,fa);}else this.$WebWorker3.postMessage(ga);return this;};y.prototype.terminate=function(){"use strict";if(this.isCurrentState('executing'))this.$WebWorker3.terminate();if(!this.isCurrentState('terminated')){this.$WebWorker9('terminated');this.$WebWorker3=null;this.$WebWorkera();this.$WebWorker6=[];}return this;};y.prototype.execute=function(){"use strict";t(!this.isCurrentState('terminated'));if(['preparing','executing'].some(this.isCurrentState,this))return this;this.$WebWorker9('preparing');y.prepareResource(this.$WebWorker2,this.$WebWorkerb.bind(this));return this;};y.prototype.setAllowCrossPageTransition=function(ea){"use strict";this.$WebWorker7=ea;return this;};y.prototype.isCurrentState=function(ea){"use strict";t(p(y.states,ea));return ea===this.$WebWorker1;};y.prototype.$WebWorkerb=function(){"use strict";t(!this.isCurrentState('executing'));if(this.isCurrentState('terminated'))return;t(this.$WebWorker2.sameOriginURL||this.$WebWorker2.source);if(this.$WebWorker2.sameOriginURL){this.$WebWorker3=new a.Worker(this.$WebWorker2.sameOriginURL);}else{this.$WebWorker3=new a.Worker(y.evalWorkerURL);this.$WebWorker3.postMessage(this.$WebWorker2.source);}this.$WebWorkerc('ping',Date.now());this.$WebWorkerd();this.$WebWorker9('executing');this.$WebWorker6.forEach(function(ea){return ea();});this.$WebWorker6=null;};y.prototype.$WebWorkera=function(){"use strict";this.$WebWorker8.release();};y.prototype.$WebWorkerc=function(ea){"use strict";for(var fa=[],ga=1,ha=arguments.length;ga<ha;ga++)fa.push(arguments[ga]);this.$WebWorker3.postMessage({type:ea,args:fa});};y.prototype.$WebWorkere=function(event,ea){"use strict";y.$WebWorkere(event,this.$WebWorker2.name,v(ea,{cross_page_transition:!!this.$WebWorker7,state:this.$WebWorker1}));};y.$WebWorkerf=function(){"use strict";return Object.keys(w({object_url:y.$WebWorkerg(),eval_url:ca(),data_url:y.$WebWorkerh(),worker:y.isSupported(),transferables:y.areTransferablesSupported()},function(ea){return !!ea;}));};y.prototype.$WebWorkerd=function(){"use strict";this.$WebWorker8.addSubscriptions(j.listen(this.$WebWorker3,'message',this.$WebWorkeri.bind(this)),j.listen(this.$WebWorker3,'error',this.$WebWorkerj.bind(this)));};y.prototype.$WebWorkerj=function(ea){"use strict";var fa=this.$WebWorker5(ea);if(!fa&&!ea.defaultPrevented)this.$WebWorkere('exception',{message:ea.message});};y.prototype.$WebWorkeri=function(event){"use strict";var ea=event.data;switch(ea.type){case 'message':this.$WebWorker4(ea.message);break;case 'pong':this.$WebWorker0=true;this.$WebWorkere('executed',{dt:Math.floor(ea.args[1]-ea.args[0]),bytes:this.$WebWorker2.source.length});break;case 'terminate':this.terminate();break;case 'haste-error':this.terminate();this.$WebWorkere('haste_error',{message:ea.message});break;case 'console':var fa=ea.args.shift();t(p(['log','error','info','debug','warn'],fa));a.console[fa].apply(a.console,ea.args);break;}};y.prototype.$WebWorker9=function(ea){"use strict";t(p(y.states,ea));this.$WebWorkere('transition',{next_state:ea});this.$WebWorker1=ea;};y.prepareResource=function(ea,fa){"use strict";fa=fa||q;t(ea.sameOriginURL||ea.url||ea.source);t(!!y.isSupported());if(ea.sameOriginURL){fa();}else if(ea.url&&l(new k(ea.url),new k(a.location.href))){ea.sameOriginURL=ea.url;fa();}else if(ea.source){if(y.$WebWorkerk())ea.sameOriginURL=y.$WebWorkerl(ea.source);fa();}else if(!ea.loading){var ga=s();ea.loading=[fa];y.$WebWorkerm(ea.url,function(ha){if(ha){ea.source=ha;if(y.$WebWorkerk())ea.sameOriginURL=y.$WebWorkerl(ha);}y.$WebWorkere('prepared',ea.name,{dt:Math.floor(s()-ga),bytes:ha.length});ea.loading.forEach(function(ia){return ia();});ea.loading=false;});}else ea.loading.push(fa);return ea;};y.releaseResource=function(ea){"use strict";if(ea.sameOriginURL.indexOf('blob:')===0){if(x.revokeObjectURL)x.revokeObjectURL(ea.sameOriginURL);ea.sameOriginURL=null;}return ea;};y.isSupported=function(){"use strict";return ba&&(y.$WebWorkerk()||ca());};y.areTransferablesSupported=function(){"use strict";return y.isSupported()&&da();};y.$WebWorkerm=function(ea,fa){"use strict";new o(ea).setTransportBuilder(r).setMethod('GET').setResponseHandler(function(ga){fa(ga);}).setErrorHandler(fa.bind(null,null)).send();};y.$WebWorkerl=function(ea){"use strict";t(y.$WebWorkerk());if(y.$WebWorkerg()){var fa=i.getBlob([ea],{type:'application/javascript'});return x.createObjectURL(fa);}if(y.$WebWorkerh())return 'data:application/javascript,'+encodeURIComponent(ea);};y.$WebWorkerg=function(){"use strict";return i.isSupported()&&z();};y.$WebWorkerh=function(){"use strict";return aa();};y.$WebWorkerk=function(){"use strict";return y.$WebWorkerg()||y.$WebWorkerh();};y.$WebWorkere=function(event,ea,fa){"use strict";if(!h.logging.enabled)return;g.log(h.logging.config,v(fa,{features_array:y.$WebWorkerf(),event:event,resource:ea}));};var z=u(function(){var ea,fa;if(!x||!x.createObjectURL)return false;try{ea=x.createObjectURL(i.getBlob([''],{type:'application/javascript'}));var ha=new a.Worker(ea);ha.terminate();fa=true;}catch(ga){fa=false;}finally{if(x.revokeObjectURL)x.revokeObjectURL(ea);}return fa;}),aa=u(function(){var ea;try{var ga=new a.Worker('data:application/javascript,');ga.terminate();ea=true;}catch(fa){ea=false;}return ea;}),ba=!!a.Worker,ca=u(function(){var ea;try{var ga=new a.Worker(y.evalWorkerURL);ga.terminate();ea=true;}catch(fa){ea=false;}return ea;}),da=u(function(){var ea;try{var ga=new a.Worker(y.evalWorkerURL),ha=new ArrayBuffer(0);ga.postMessage({buffer:ha},[ha]);ga.terminate();ea=true;}catch(fa){ea=false;}return ea;});y.states=['constructed','preparing','executing','terminated'];y.evalWorkerURL=h.evalWorkerURL;e.exports=y;},null);
__d("WebWorkerPool",["PooledWebWorker","emptyFunction"],function(a,b,c,d,e,f,g,h){i.isSupported=function(){"use strict";return g.isSupported();};function i(j,k){"use strict";this.$WebWorkerPool0=[];for(var l=0;l<k;l++)this.$WebWorkerPool0.push(new g(this,l,j).setErrorHandler(this.$WebWorkerPool1).setMessageHandler(this.$WebWorkerPool2).execute());this.$WebWorkerPool3=0;}i.prototype.setMessageHandler=function(j){"use strict";this.$WebWorkerPool4=j||h;return this;};i.prototype.setAllowCrossPageTransition=function(j){"use strict";this.$WebWorkerPool0.forEach(function(k){return k.setAllowCrossPageTransition(j);});return this;};i.prototype.setErrorHandler=function(j){"use strict";this.$WebWorkerPool5=j||h;return this;};i.prototype.postMessage=function(){"use strict";for(var j=[],k=0,l=arguments.length;k<l;k++)j.push(arguments[k]);var m=this.getWorker();m.postMessage.apply(m,j);return m;};i.prototype.$WebWorkerPool2=function(){"use strict";for(var j=[],k=0,l=arguments.length;k<l;k++)j.push(arguments[k]);j.unshift(this);this.getPool().$WebWorkerPool4.apply(this.getPool(),j);};i.prototype.$WebWorkerPool1=function(){"use strict";for(var j=[],k=0,l=arguments.length;k<l;k++)j.push(arguments[k]);j.unshift(this);return this.getPool().$WebWorkerPool5.apply(this.getPool(),j);};i.prototype.getWorker=function(){"use strict";var j=this.$WebWorkerPool0[this.$WebWorkerPool3];this.$WebWorkerPool3=(this.$WebWorkerPool3+1)%this.$WebWorkerPool0.length;return j;};e.exports=i;},null);
__d("JpegResizer",["Emscripten","JpegResizerConfig","JpegResizeWorkerResource","WebWorker","WebWorkerPool","PUWErrorCodes"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=null;n.isSupported=function(){"use strict";return k.isSupported()&&g.isSupported()&&!h.isGKBlacklisted;};n.getSingleton=function(){"use strict";if(!m)m=new n(n.DEFAULT_POOL_SIZE).setAllowCrossPageTransition(true);return m;};n.prepareResource=function(o){"use strict";j.prepareResource(i,o);};function n(o){"use strict";o=o||n.DEFAULT_POOL_SIZE;j.prepareResource(i);this.$JpegResizer0=(new k(i,o)).setErrorHandler(this.$JpegResizer1.bind(this)).setMessageHandler(this.$JpegResizer2.bind(this));this.$JpegResizer3={};this.$JpegResizer4=n.DEFAULT_RESIZE_HEIGHT;this.$JpegResizer5=n.DEFAULT_RESIZE_WIDTH;}n.prototype.setHighQuality=function(o){"use strict";if(o){this.$JpegResizer4=n.DEFAULT_RESIZE_HEIGHT;this.$JpegResizer5=n.DEFAULT_RESIZE_WIDTH;}else{this.$JpegResizer4=n.LOW_QUALITY_RESIZE_HEIGHT;this.$JpegResizer5=n.LOW_QUALITY_RESIZE_WIDTH;}return this;};n.prototype.setAllowCrossPageTransition=function(o){"use strict";this.$JpegResizer0.setAllowCrossPageTransition(o);return this;};n.prototype.resizeBlob=function(o,p,q){"use strict";var r=this.$JpegResizer0.getWorker();if(r.isCurrentState('terminated')){var s=new Error('Worker terminated');s.code=l.WORKER_TERMINATED;p(s);return this;}var t=r.postMessage({blob:o,height:this.$JpegResizer4,width:this.$JpegResizer5}).getIndex();this.$JpegResizer6(t).unshift({done:p,progress:q});return this;};n.prototype.$JpegResizer6=function(o){"use strict";if(!this.$JpegResizer3.hasOwnProperty(o))this.$JpegResizer3[o]=[];return this.$JpegResizer3[o];};n.prototype.$JpegResizer1=function(o,p){"use strict";o.terminate();var q=this.$JpegResizer6(o.getIndex());this.$JpegResizer7(p);q.forEach(function(r){return r.done(p);});q.length=0;};n.prototype.$JpegResizer2=function(o,p){"use strict";if(p.error)this.$JpegResizer7(p.error);if(p.done){this.$JpegResizer6(o.getIndex()).pop().done(p.error,p.blob,p.skipped);}else{var q=this.$JpegResizer6(o.getIndex()),r=q[q.length-1].progress;if(r)r({written:p.written,total:p.total});}};n.prototype.$JpegResizer7=function(o){"use strict";var p=o.message;if(p.indexOf('Not a JPEG file')!==-1){o.code=l.BAD_JPEG;}else if(p.indexOf('abort()')!==-1){o.code=l.WORKER_ABORT;}else o.code=l.UNKNOWN_RESIZE_ERROR;};n.DEFAULT_POOL_SIZE=3;n.DEFAULT_RESIZE_HEIGHT=2048;n.DEFAULT_RESIZE_WIDTH=2048;n.LOW_QUALITY_RESIZE_HEIGHT=960;n.LOW_QUALITY_RESIZE_WIDTH=960;e.exports=n;},null);
__d("MercuryFileUploader",["ArbiterMixin","CSS","Dialog","DOM","Event","FileForm","FileFormResetOnSubmit","FileInput","FormSubmitOnChange","MercuryAttachment","MercuryAttachmentTemplates","MercuryConstants","PhotosUploadID","SubscriptionsHandler","csx","fbt","getObjectValues","mixin","shield","startsWith"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){var aa=x(g);for(var ba in aa)if(aa.hasOwnProperty(ba))da[ba]=aa[ba];var ca=aa===null?null:aa.prototype;da.prototype=Object.create(ca);da.prototype.constructor=da;da.__superConstructor__=aa;function da(fa,ga,ha,ia){"use strict";this.$MercuryFileUploader0=fa;this.$MercuryFileUploader1={};this.$MercuryFileUploader2={};this.$MercuryFileUploader3={};this.$MercuryFileUploader4={};this.$MercuryFileUploader5={};this.$MercuryFileUploader6={};this.$MercuryFileUploader7={};this.$MercuryFileUploader8={};this.updateElements(ga,ha,ia);}da.prototype.updateElements=function(fa,ga,ha){"use strict";this.$MercuryFileUploader9&&this.$MercuryFileUploader9.release();this.$MercuryFileUploader9=new t();this.$MercuryFileUploadera&&this.$MercuryFileUploadera.destroy();this.$MercuryFileUploadera=new l(fa,[o,m]);this.$MercuryFileUploadera.setAllowCrossOrigin(true);this.$MercuryFileUploadera.setUploadInParallel(true);var ia=j.find(fa,"._4q60"),ja=j.find(ia,"._4q61");new n(ia,ja,ga);this.$MercuryFileUploader9.addSubscriptions(this.$MercuryFileUploadera.subscribe('submit',function(){var ka={count:0,file_sizes:[]};if(ga.files){for(var la=0;la<ga.files.length;la++)if(ga.files[la].size>r.AttachmentMaxSize){this.showAttachmentSizeErrorDialog();return false;}var ma={};for(var na=0;na<ga.files.length;na++){var oa=this.$MercuryFileUploaderb();this.$MercuryFileUploaderc(oa,ga.files[na].name);ka.count++;ka.file_sizes.push(ga.files[na].size);ma[oa]=ga.files[na];}this.$MercuryFileUploadera.setFiles(ma);}else{ha.value=this.$MercuryFileUploaderb();this.$MercuryFileUploaderc(ha.value,ga.value);ka.count=1;}this.inform('submit',ka);}.bind(this)),this.$MercuryFileUploadera.subscribe('success',this.$MercuryFileUploaderd.bind(this)),this.$MercuryFileUploadera.subscribe('failure',this.$MercuryFileUploadere.bind(this)),k.listen(ja,'click',y(this.inform,this,'open')));};da.prototype.showAttachmentSizeErrorDialog=function(){"use strict";this.$MercuryFileUploadera.abort();this.$MercuryFileUploadera.clear();new i().setTitle("The file you have selected is too large").setBody("The file you have selected is too large. The maximum size is 25MB.").setButtons(i.OK).setSemiModal(true).show();};da.prototype.addDroppedFiles=function(fa){"use strict";if(!this.$MercuryFileUploadera||!this.$MercuryFileUploadera.canUseXHR())return;var ga={},ha={count:0,file_sizes:[]};for(var ia=0;ia<fa.length;ia++){var ja=fa[ia];if(ja.size>r.AttachmentMaxSize){this.showAttachmentSizeErrorDialog();return false;}var ka=this.$MercuryFileUploaderb();this.$MercuryFileUploaderc(ka,ja.name);ga[ka]=ja;ha.file_sizes.push(ja.size);ha.count++;}this.$MercuryFileUploadera.setFiles(ga);this.$MercuryFileUploadera.forceSendViaXHR();this.inform('submit',ha);};da.prototype.isUploading=function(){"use strict";return !!Object.keys(this.$MercuryFileUploader6).length;};da.prototype.addCachedAttachments=function(fa){"use strict";fa.forEach(function(ga){var ha=this.$MercuryFileUploaderb();this.$MercuryFileUploaderc(ha,ga.filename);this.$MercuryFileUploaderf(ha,ga);}.bind(this));};da.prototype.addCachedImageFiles=function(fa){"use strict";var ga="\u0e23\u0e39\u0e1b\u0e20\u0e32\u0e1e";fa.forEach(function(ha){var ia=this.$MercuryFileUploaderb();this.$MercuryFileUploaderc(ia,ga);this.$MercuryFileUploaderf(ia,{filename:ha,image_id:ha,filetype:'image/jpeg'});}.bind(this));};da.prototype.getAttachments=function(){"use strict";return w(this.$MercuryFileUploader1);};da.prototype.getImageFiles=function(){"use strict";var fa=Object.keys(this.$MercuryFileUploader2).sort(),ga=[];fa.forEach(function(ha){return ga.push(this.$MercuryFileUploader2[ha]);}.bind(this));return ga;};da.prototype.getVideoFiles=function(){"use strict";return w(this.$MercuryFileUploader3);};da.prototype.getAudioFiles=function(){"use strict";return w(this.$MercuryFileUploader4);};da.prototype.getFiles=function(){"use strict";return w(this.$MercuryFileUploader5);};da.prototype.removeAttachments=function(){"use strict";j.empty(this.$MercuryFileUploader0);this.$MercuryFileUploader1={};this.$MercuryFileUploader2={};this.$MercuryFileUploader3={};this.$MercuryFileUploader4={};this.$MercuryFileUploader5={};this.$MercuryFileUploader7={};this.$MercuryFileUploader6={};this.$MercuryFileUploader8={};h.hide(this.$MercuryFileUploader0);this.inform('dom-updated');};da.prototype.destroy=function(){"use strict";this.$MercuryFileUploader9&&this.$MercuryFileUploader9.release();this.$MercuryFileUploadera&&this.$MercuryFileUploadera.destroy();this.removeAttachments();};da.prototype.$MercuryFileUploaderc=function(fa,ga){"use strict";var ha=q[':fb:mercury:upload-file-row'].build();this.$MercuryFileUploader7[fa]=ha;this.$MercuryFileUploader6[fa]=true;this.$MercuryFileUploader8[fa]=Date.now();j.appendContent(ha.getNode('iconText'),ea(ga));k.listen(ha.getNode('closeFileUpload'),'click',this.$MercuryFileUploaderg.bind(this,fa));j.appendContent(this.$MercuryFileUploader0,ha.getRoot());h.show(this.$MercuryFileUploader0);this.inform('dom-updated');};da.prototype.$MercuryFileUploaderg=function(fa,event){"use strict";if(this.$MercuryFileUploader6[fa]){this.inform('upload-canceled-during-upload');}else if(this.$MercuryFileUploader1[fa]||this.$MercuryFileUploader2[fa]||this.$MercuryFileUploader3[fa]||this.$MercuryFileUploader4[fa]||this.$MercuryFileUploader5[fa])this.inform('upload-canceled-after-uploaded');delete this.$MercuryFileUploader1[fa];delete this.$MercuryFileUploader2[fa];delete this.$MercuryFileUploader3[fa];delete this.$MercuryFileUploader4[fa];delete this.$MercuryFileUploader5[fa];delete this.$MercuryFileUploader6[fa];delete this.$MercuryFileUploader8[fa];var ga=this.$MercuryFileUploader7[fa];delete this.$MercuryFileUploader7[fa];if(ga){j.remove(ga.getRoot());this.inform('dom-updated');}this.inform('upload-canceled');return false;};da.prototype.$MercuryFileUploaderh=function(fa,ga){"use strict";var ha=this.$MercuryFileUploader7[fa],ia=p.getAttachIconClassByMime(ga);h.addClass(ha.getNode('iconText'),ia);h.addClass(ha.getRoot(),'done');};da.prototype.$MercuryFileUploaderf=function(fa,ga){"use strict";if(this.$MercuryFileUploader6[fa]){delete this.$MercuryFileUploader6[fa];if(ga.image_id){this.$MercuryFileUploader2[fa]=ga.image_id;}else if(ga.video_id){this.$MercuryFileUploader3[fa]=ga.video_id;}else if(ga.audio_id){this.$MercuryFileUploader4[fa]=ga.audio_id;}else if(ga.file_id){this.$MercuryFileUploader5[fa]=ga.file_id;}else this.$MercuryFileUploader1[fa]=ga;this.$MercuryFileUploaderh(fa,ga.filetype);this.inform('one-upload-completed',{upload_time_ms:Date.now()-this.$MercuryFileUploader8[fa]});}if(!this.isUploading())this.inform('all-uploads-completed',{count:this.getAttachments().length});};da.prototype.$MercuryFileUploaderd=function(event,fa){"use strict";var ga=fa.response.getPayload();this.$MercuryFileUploaderf(this.$MercuryFileUploaderi(fa),ga.metadata[0]);};da.prototype.$MercuryFileUploadere=function(event,fa){"use strict";this.inform('one-upload-failed');this.$MercuryFileUploaderg(this.$MercuryFileUploaderi(fa),event);};da.prototype.$MercuryFileUploaderb=function(){"use strict";return 'upload_'+s.getNewID();};da.prototype.$MercuryFileUploaderi=function(fa){"use strict";var ga=fa.response.getPayload();if(fa.upload){return fa.upload.getName();}else return ga.uploadID;};function ea(fa){if(fa&&z(fa,'C:\\fakepath\\'))return fa.substring(12);return fa;}e.exports=da;},null);
__d("MercuryShareLinkUploader",["ArbiterMixin","AsyncRequest","CSS","DOM","Event","Form","URLScraper","WebMessengerEvents","mixin","isEmpty"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=o(g);for(var r in q)if(q.hasOwnProperty(r))t[r]=q[r];var s=q===null?null:q.prototype;t.prototype=Object.create(s);t.prototype.constructor=t;t.__superConstructor__=q;function t(u,v,w,x,y){"use strict";this.$MercuryShareLinkUploader0=u;this.$MercuryShareLinkUploader1=v;this.$MercuryShareLinkUploader2=w;this.$MercuryShareLinkUploader3=y;this.$MercuryShareLinkUploader4=false;this.$MercuryShareLinkUploader5=null;this.$MercuryShareLinkUploader6=null;k.listen(x,'click',this.close.bind(this));k.listen(y,'keyup',function(){!y.value.length&&this.$MercuryShareLinkUploader7.enable();}.bind(this));this.$MercuryShareLinkUploader7=new m(y);this.$MercuryShareLinkUploader7.subscribe('match',function(z,aa){this.loadShare(aa&&aa.url);}.bind(this));}t.prototype.getAttachData=function(){"use strict";return this.loadAttachData(this.$MercuryShareLinkUploader4,this.$MercuryShareLinkUploader0,this.$MercuryShareLinkUploader3);};t.prototype.loadAttachData=function(u,v,w,x){"use strict";if(u){var y=l.serialize(v),z=y.attachment&&y.attachment.params,aa=y.link_metrics?y.link_metrics.no_image:true;if(!z||p(z))return null;var ba=x?x():w.value;if(ba.indexOf(z.url)===-1)return y;if(!z.summary&&!z.favicon&&aa&&z.title&&z.url&&z.url.substr(0,z.title.length)===z.title)return null;return y;}return null;};t.prototype.check=function(){"use strict";this.$MercuryShareLinkUploader7.check();};t.prototype.close=function(){"use strict";this.$MercuryShareLinkUploader8();this.$MercuryShareLinkUploader7.disable();this.inform('closed');};t.prototype.clear=function(){"use strict";this.$MercuryShareLinkUploader8();this.$MercuryShareLinkUploader7.enable();};t.prototype.enable=function(){"use strict";this.$MercuryShareLinkUploader7.enable();};t.prototype.disable=function(){"use strict";this.$MercuryShareLinkUploader7.disable();};t.prototype.loadShare=function(u){"use strict";this.$MercuryShareLinkUploader5=u;this.$MercuryShareLinkUploader6&&this.$MercuryShareLinkUploader6.abort();this.$MercuryShareLinkUploader6=new h().setMethod('POST').setURI('/ajax/share_scrape.php').setData({u:u}).setHandler(this.$MercuryShareLinkUploader9.bind(this).bind(null,u)).setStatusElement(this.$MercuryShareLinkUploader2);this.$MercuryShareLinkUploader6.send();this.inform('link-detected');};t.prototype.$MercuryShareLinkUploader9=function(u,v){"use strict";if(this.$MercuryShareLinkUploader5!==u)return;this.$MercuryShareLinkUploader5=null;this.$MercuryShareLinkUploader6=null;i.show(this.$MercuryShareLinkUploader0);j.empty(this.$MercuryShareLinkUploader1);j.setContent(this.$MercuryShareLinkUploader1,v.payload);this.$MercuryShareLinkUploader4=true;if(!this.getAttachData()){this.close();return;}n.detailDOMChanged();};t.prototype.$MercuryShareLinkUploader8=function(){"use strict";i.hide(this.$MercuryShareLinkUploader0);this.$MercuryShareLinkUploader4=false;this.$MercuryShareLinkUploader5=null;this.$MercuryShareLinkUploader6&&this.$MercuryShareLinkUploader6.abort();this.$MercuryShareLinkUploader6=null;this.$MercuryShareLinkUploader7.reset();n.detailDOMChanged();};e.exports=t;},null);
__d("VideoCallRecordMessageDialog",["AsyncDialog","AsyncRequest","Dialog","URI","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){var l={get:function(m,n){var o="\u0e04\u0e38\u0e13\u0e15\u0e49\u0e2d\u0e07\u0e01\u0e32\u0e23\u0e1d\u0e32\u0e01\u0e02\u0e49\u0e2d\u0e04\u0e27\u0e32\u0e21\u0e2b\u0e23\u0e37\u0e2d\u0e44\u0e21\u0e48",p="\u0e02\u0e49\u0e2d\u0e04\u0e27\u0e32\u0e21\u0e43\u0e2b\u0e21\u0e48";return new i().setTitle(k._("{firstname} \u0e44\u0e21\u0e48\u0e27\u0e48\u0e32\u0e07",[k.param("firstname",n)])).setBody(o).setButtons([{name:'record-message',label:p},i.CANCEL]).setHandler(function(){var q=j('/ajax/messaging/composer.php').setQueryData({ids:[m],autoloadvideo:true}).toString();g.send(new h(q));});}};e.exports=l;},null);
__d("XSkypeDeprecationWarningDialogControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f){e.exports=b("XControllerURIBuilder").create("\/videocall\/skype_deprecation_warning\/",{__asyncDialog:{type:"Int"}});},null);
__d("FBRTCLogger",["Log","LogHistory","MarauderLogger","formatDate","pageID"],function(a,b,c,d,e,f,g,h,i,j,k){var l='webrtc',m='sent_message',n='received_message',o='send_succeeded',p='send_failed',q='info',r='call_action',s='client_event',t='client_error',u='type',v='msg_id',w='ack_msg_id',x='call_id',y='from',z='to',aa='content',ba='tag',ca='peer_id',da='error_code',ea='trigger',fa='endcallstats',ga=null;ha.getInstance=function(){"use strict";if(!ga)ga=new ha();return ga;};function ha(){"use strict";this.$FBRTCLogger0=h.getInstance(l);}ha.prototype.logToConsole=function(ia){"use strict";var ja='Console';this.$FBRTCLogger1(null,null,ja,ia);this.$FBRTCLogger0.log(ja,ia);};ha.prototype.logReceivedMessage=function(ia,ja,ka){"use strict";var la={};la[y]=ia;la[x]=ja;la[u]=ka.type;la[v]=ka.msg_id;if(ka.sdp)la[aa]=ka.sdp;if(ka.ack_id)la[w]=ka.ack_id;this.$FBRTCLogger2(n,la);this.$FBRTCLogger1(ia,ja,'Received',ka.type+', '+ka.msg_id);};ha.prototype.logSentMessage=function(ia,ja,ka){"use strict";var la={};la[z]=ia;la[x]=ja;la[u]=ka.type;la[v]=ka.msg_id;if(ka.sdp)la[aa]=ka.sdp;if(ka.ack_id)la[w]=ka.ack_id;this.$FBRTCLogger2(m,la);this.$FBRTCLogger1(ia,ja,'Sent',ka.type+', '+ka.msg_id);};ha.prototype.logSentMessageSuccess=function(ia,ja,ka,la){"use strict";var ma={};ma[ca]=ia;ma[x]=ja;ma[u]=ka;ma[v]=la;this.$FBRTCLogger2(o,ma);};ha.prototype.logSentMessageFailure=function(ia,ja,ka,la,ma){"use strict";var na={};na[ca]=ia;na[x]=ja;na[u]=ka;na[v]=la;na[da]=ma;this.$FBRTCLogger2(p,na);this.$FBRTCLogger1(ia,ja,'Send Failed',ka+', '+ma);};ha.prototype.logCallAction=function(ia,ja,ka,la,ma){"use strict";var na={};na[ca]=ia;na[x]=ja;na[r]=ka;na[aa]=la;if(ma)na[ea]=ma;this.$FBRTCLogger2(r,na);this.$FBRTCLogger1(ia,ja,'CallAction',ka+', '+la);};ha.prototype.logEvent=function(ia,ja,event){"use strict";var ka={};ka[ca]=ia;ka[x]=ja;ka[aa]=event;this.$FBRTCLogger2(s,ka);this.$FBRTCLogger1(ia,ja,'Event',event);};ha.prototype.logInfo=function(ia,ja,ka){"use strict";var la={};la[ca]=ia;la[x]=ja;la[aa]=ka;this.$FBRTCLogger2(q,la);this.$FBRTCLogger1(ia,ja,'Info',ka);};ha.prototype.logError=function(ia,ja,ka){"use strict";var la={};la[ca]=ia;la[x]=ja;la[aa]=ka;this.$FBRTCLogger2(t,la);this.$FBRTCLogger1(ia,ja,'Error',ka);};ha.prototype.logErrorWithoutID=function(ia){"use strict";this.logError(null,null,ia);};ha.prototype.logEndCallSummary=function(ia){"use strict";if(!ia)return;var ja={};ja[ca]=ia.peerID;ja[x]=ia.callID;ja[ba]=fa;ja[aa]=ia.toString();var ka=ia.getExtraInfo();for(var la in ka)if(ka.hasOwnProperty(la))ja[la]=ka[la];this.$FBRTCLogger2(q,ja);this.$FBRTCLogger1(ia.peerID,ia.callID,'Call Summary',ja);};ha.prototype.$FBRTCLogger2=function(ia,ja){"use strict";ja.page_id=k;this.$FBRTCLogger0.log(ia,ja);i.log(ia,l,ja);};ha.prototype.$FBRTCLogger1=function(ia,ja,ka,la){"use strict";};ha.CallAction={START_CALL:'start_call',RECEIVED_CALL:'received_call',ANSWER_CALL:'answer_call',END_CALL:'end_call',DENIED_PERMISSION:'denied_permission',SET_MUTE:'set_mute',SET_VIDEO_ON:'set_video_on',SET_SELF_VIEW_ON:'set_self_view_on',SET_FULLSCREEN_ON:'set_fullscreen_on',START_SKYPE:'start_skype',TRY_NEW:'try_new',OPEN_POPUP:'open_popup',POPUP_OPENED:'popup_opened',AUTO_DISABLE_VIDEO:'auto_disable_video'};ha.Trigger={ADMIN_MESSAGE:'admin_message',CHAT_TAB_ICON:'chat_tab_icon',CHAT_TAB_ICON_TOUR:'chat_tab_icon_tour',SKYPE_DEPRECATION_DIALOG:'skype_deprecation_dialog',REDIAL_BUTTON:'redial_button',RETURN_CALL:'return_call',UNKNOWN:'unknown'};ha.Key={DEVICE_INFO:'device_info',RATING:'rating5',RATING_SHOWN:'rating_shown',SURVEY_CHOICE:'survey_choice',SURVEY_DETAILS:'survey_details',SURVEY_SHOWN:'survey_shown'};e.exports=ha;},null);
__d("VideoCallSkypeDeprecationWarning",["AsyncDialog","AsyncRequest","CacheStorage","VideoCallSupport","XSkypeDeprecationWarningDialogControllerURIBuilder","FBRTCLogger"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m='localstorage',n='RTC_',o='SKYPE_DEPRECATION_STATE',p=1000*60*60*24;function q(r){"use strict";this.$VideoCallSkypeDeprecationWarning0=new i(m,n);this.$VideoCallSkypeDeprecationWarning1=r;this.$VideoCallSkypeDeprecationWarning2=l.getInstance();}q.prototype.showWarningOrStartCall=function(r,s){"use strict";if(this.$VideoCallSkypeDeprecationWarning3(r)){this.$VideoCallSkypeDeprecationWarning4(r);}else if(this.$VideoCallSkypeDeprecationWarning5(r)){this.$VideoCallSkypeDeprecationWarning1.makeWebRTCCall(r,s||l.Trigger.CHAT_TAB_ICON);}else this.$VideoCallSkypeDeprecationWarning1.makeSkypeCall(r);};q.prototype.$VideoCallSkypeDeprecationWarning5=function(r){"use strict";if(!this.$VideoCallSkypeDeprecationWarning1.canCallByWebrtc(r))return false;if(!j.isPluginInstalled(false))return true;return this.$VideoCallSkypeDeprecationWarning6().optedInToWebRTC;};q.prototype.$VideoCallSkypeDeprecationWarning3=function(r){"use strict";if(!this.$VideoCallSkypeDeprecationWarning1.canCallByWebrtc(r))return false;if(!j.isPluginInstalled(false))return false;var s=this.$VideoCallSkypeDeprecationWarning6();return !s.optedInToWebRTC&&(Date.now()-s.updatedAt)>p;};q.prototype.$VideoCallSkypeDeprecationWarning4=function(r){"use strict";this.$VideoCallSkypeDeprecationWarning2.logInfo(r,null,'Show Deprecation Dialog');var s=new k().getURI(),t=new h(s),u=this;this.$VideoCallSkypeDeprecationWarning7();g.send(t,function(v){v.subscribe('confirm',function(){v.hide();u.$VideoCallSkypeDeprecationWarning8();u.$VideoCallSkypeDeprecationWarning1.makeWebRTCCall(r,l.Trigger.SKYPE_DEPRECATION_DIALOG);u.$VideoCallSkypeDeprecationWarning2.logCallAction(r,null,l.CallAction.TRY_NEW);});v.subscribe('cancel',function(){u.$VideoCallSkypeDeprecationWarning1.makeSkypeCall(r);u.$VideoCallSkypeDeprecationWarning2.logCallAction(r,null,l.CallAction.START_SKYPE);});});};q.prototype.$VideoCallSkypeDeprecationWarning7=function(){"use strict";this.$VideoCallSkypeDeprecationWarning0.set(o,{optedInToWebRTC:false,updatedAt:Date.now()});};q.prototype.$VideoCallSkypeDeprecationWarning8=function(){"use strict";this.$VideoCallSkypeDeprecationWarning0.set(o,{optedInToWebRTC:true,updatedAt:Date.now()});};q.prototype.$VideoCallSkypeDeprecationWarning6=function(){"use strict";var r=this.$VideoCallSkypeDeprecationWarning0.get(o);if(r)return r;return {optedInToWebRTC:false,updatedAt:0};};q.prototype.ut_setStorage=function(r){"use strict";this.$VideoCallSkypeDeprecationWarning0=r;};e.exports=q;},null);
__d("ChatActivity",["Event","Arbiter","AvailableList","AvailableListConstants","JSLogger","MercuryConfig","PresenceState","UserActivity","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=l.activity_limit||60000,q=l.idle_limit||1800000,r=l.idle_poll_interval||300000,s=k.create('chat_activity'),t=Date.now(),u=t,v=true;function w(){var aa=Date.now();return !!(v&&(aa-t<p));}var x=o(new h(),{isActive:w});function y(){var aa=t;t=Date.now();if(t-aa>q){s.debug('idle_to_active',aa);m.doSync();}x.inform('activity');}i.subscribe(j.ON_AVAILABILITY_CHANGED,function(){if(!i.isUserIdle())u=Date.now();});g.listen(window,'focus',function(){v=true;y();});g.listen(window,'blur',function(){v=false;});n.subscribe(function(){y();});function z(aa){var ba=aa&&aa.at&&m.verifyNumber(aa.at);if(typeof ba!=='number')ba=null;return ba||0;}setInterval(function(){var aa=Date.now(),ba=z(m.get()),ca=Math.max(t,ba,u);if(aa-ca>q){s.debug('idle',{cookie:ba,local:t,presence:u});x.inform('idle',aa-ca);}},r);m.registerStateStorer(function(aa){var ba=z(aa);if(ba<t)aa.at=t;return aa;});h.subscribe(k.DUMP_EVENT,function(aa,ba){ba.chat_activity={activity_limit:p,idle_limit:q,idle_poll_interval:r,last_active_time:t,last_global_active_time:u};});e.exports=x;},null);
__d("ChatAnimatedGifs",["URI"],function(a,b,c,d,e,f,g){var h={shouldHideBody:function(i){if(!i.has_attachment)return false;for(var j=0;j<i.attachments.length;j++){var k=i.attachments[j];if(k.preview_url){var l=h.getRawUrlFromSafeUrl(k.preview_url);if(i.body==l)return true;}}return false;},getRawUrlFromSafeUrl:function(i){return g(i).getQueryData().url;}};e.exports=h;},null);
__d("ChatEmployeeAwayWarning",["MercuryIDs","MercuryParticipants","MercuryViewer"],function(a,b,c,d,e,f,g,h,i){var j={updateEmployeeAwayWarning:function(k,l,m){h.get(i.getID(),function(n){var o=n.employee;if(o)h.getMulti(k.participants,function(p){var q=false,r=g.getUserIDFromThreadID(k.thread_id);if(!r)return;var s='fbid:'+r;for(var t in p)if(s==p[t].id&&p[t].is_employee_away)q=true;if(q){l();}else m();});});}};e.exports=j;},null);
__d("ChatTabModel",["Arbiter","ArbiterMixin","ChatBehavior","ChatConfig","LogHistory","JSLogger","MercuryAssert","MercuryLocalIDs","PresenceInitialData","PresenceState","PresenceUtil","areJSONRepresentationsEqual","arrayContains","copyProperties","MercuryServerRequests","MercuryThreads","MercuryTimestampTracker"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){var u=b('MercuryServerRequests').get(),v=b('MercuryThreads').get(),w=b('MercuryTimestampTracker').get(),x=[],y=null,z=null,aa=null;function ba(){return parseInt(o.serverTime,10);}var ca=j.get('tab_max_load_age')||3600000,da=ba()-ca,ea=0,fa=20,ga=k.getInstance('chat_tab_model'),ha=false;function ia(bb){var cb=p.verifyNumber(bb.uct2);if(!cb||typeof cb!=='number'){ga.warn('bad_cookie_version',bb);return null;}if(cb<ea||cb<da)return null;return cb;}function ja(bb){if(bb.uct2==ea)return;var cb=ia(bb),db={};if(!cb){db.old_tabs=bb&&bb.t2&&JSON.stringify(bb.t2);db.old_promoted=bb&&bb.lm2;db.old_time=bb&&bb.uct2;db.old_reason=bb&&bb.tr;db.old_window=bb&&bb.tw;var eb=[];x.forEach(function(fb){if(!fb.fragile){var gb={i:fb.id,si:fb.server_id};if(fb.raised)gb.r=1;eb.push(gb);}});bb.t2=eb;bb.lm2=y;bb.uct2=ea;bb.tr=aa;bb.tw=q.getSessionID();db.new_tabs=JSON.stringify(bb.t2);db.new_promoted=bb.lm2;db.new_time=bb.uct2;db.new_reason=bb.tr;db.new_window=bb.tw;ga.debug('store',db);}else{db.tabs=bb&&bb.t2&&JSON.stringify(bb.t2);db.promoted=bb&&bb.lm2;db.time=bb&&bb.uct2;db.reason=bb&&bb.tr;db.window=bb&&bb.tw;db.last_change_time=ea;db.last_change_reason=aa;db.min_change_time=da;ga.warn('store_bad_state',db);}return bb;}function ka(bb){if(bb){var cb=ia(bb);if(cb&&cb!==ea){var db={};db.old_tabs=JSON.stringify(x);db.old_promoted=y;db.old_time=ea;db.old_reason=aa;db.window_id=q.getSessionID();db.cookie_tabs=bb&&bb.t2&&JSON.stringify(bb.t2);db.cookie_promoted=bb&&bb.lm2;db.cookie_time=bb&&bb.uct2;db.cookie_reason=bb&&bb.tr;db.cookie_window=bb&&bb.tw;ea=cb;aa='load';var eb=la(bb.t2,bb.lm2||null);db.load_result=eb;db.new_tabs=JSON.stringify(x);db.new_promoted=y;db.new_time=ea;db.new_reason=aa;var event='load';if(!ha)event+='_init';ga.log(event,db);return eb;}}else ga.warn('load_bad_state',bb);return false;}function la(bb,cb){if(ma(bb,cb)){var db=x.filter(function(gb){return gb.fragile;}),eb={};y=null;x=bb.map(function(gb){var hb={id:gb.i,server_id:gb.si};if(hb.id==cb)y=hb.id;if(gb.r)hb.raised=true;eb[hb.id]=hb;return hb;});x=x.filter(function(gb){return gb!=null;});if(z)for(var fb in z)if(!eb[fb]||!eb[fb].raised)delete z[fb];db=db.filter(function(gb){return !eb[gb.id];});x=x.concat(db);qa();return true;}return false;}function ma(bb,cb){if(cb!=y)return true;var db=x.filter(function(gb){return !gb.fragile;});if(bb.length!=db.length)return true;for(var eb=0,fb=bb.length;eb<fb;eb++)if(!r(bb[eb],db[eb]))return true;return false;}function na(bb,cb,db){var eb=ka(p.get());if(cb===(void 0)||cb>ea){if(bb()){eb=true;aa=db||null;pa(cb);}}else ga.error('rejected',{change_time:cb,state_time:ea});eb&&oa();}function oa(){if(ha)za.inform('chat/tabs-changed',za.get());}function pa(bb){if(bb===(void 0))bb=Math.max(w.getLastUserMessageTimestamp()||1,ea+1);ea=bb;p.doSync();}function qa(bb){var cb=x.length-fa;if(cb>0)x=x.filter(function(db){return db.raised||db.id==bb||cb--<=0;});if(cb>0)x=x.filter(function(db){return db.id==y||db.id==bb||cb--<=0;});}function ra(bb){for(var cb=0;cb<x.length;cb++)if(x[cb].id==bb)return cb;return -1;}function sa(bb,cb){var db=v.getThreadMetaNow(bb);if(!db)return false;if(db.is_canonical_user){return va(bb,cb);}else{var eb=ta(bb);if(eb)u.getServerThreadID(bb,function(fb){if(xa(bb,fb)){pa();oa();}});return eb;}}function ta(bb){if(ra(bb)===-1){x.push({id:bb,fragile:true});ga.log('open_fragile_tab',{tabs:JSON.stringify(x),opened:bb,window_id:q.getSessionID()});return true;}return false;}function ua(bb){var cb=[];bb.forEach(function(db){var eb=ra(db);if(eb!==-1)cb.push(x[eb]);});x.forEach(function(db){if(!s(bb,db.id))cb.push(db);});na(function(){if(ma(cb,y)){x=cb;return true;}return false;});}function va(bb,cb){var db=ra(bb);if(db!=-1)if(x[db].fragile){x.splice(db,1);}else{cb&&(x[db].signatureID=cb);return true;}for(var eb=0;eb<=x.length;eb++)if(eb==x.length||x[eb].fragile){x.splice(eb,0,{id:bb,signatureID:cb});qa(bb);ga.log('open_tab',{tabs:JSON.stringify(x),opened:bb,window_id:q.getSessionID()});return true;}}function wa(bb){var cb=ra(bb);if(cb!=-1&&(!x[cb].raised||y!==bb)){x[cb].raised=true;y=bb;return true;}return false;}function xa(bb,cb){var db=ra(bb);if(db!=-1&&x[db].fragile){var eb=x[db];eb.fragile=false;eb.server_id=cb;var fb=[];x.forEach(function(gb){if(gb.id!=bb){if(eb&&gb.fragile){fb.push(eb);eb=null;}fb.push(gb);}});if(eb)fb.push(eb);x=fb;ga.log('make_permanent',{tabs:JSON.stringify(x),tab_id:bb,window_id:q.getSessionID()});return true;}return false;}function ya(bb){var cb=ra(bb);if(bb==y)y=null;if(cb!=-1){x.splice(cb,1);ga.log('close_tab',{tabs:JSON.stringify(x),closed:bb,window_id:q.getSessionID()});return true;}return false;}p.registerStateStorer(ja);p.registerStateLoader(function(bb){if(ka(bb))oa();});function za(){}t(za,h,{isTabPromoted:function(bb){if(bb)return bb==y;return false;},indexOf:function(bb){return ra(bb);},getTab:function(bb){m.isThreadID(bb);var cb=this.indexOf(bb);if(cb>-1){var db=x[cb];return t({},db);}return null;},getEmptyTab:function(){var bb;for(var cb=0;cb<x.length;cb++){bb=x[cb].id;if(v.isNewEmptyLocalThread(bb))return bb;}bb=n.generateThreadID();v.createNewLocalThread(bb,[]);return bb;},getServerTime:function(){return ba();},changeShowingTabs:function(bb){return ua(bb);},closeAllTabs:function(){if(x.length){ga.log('close_all_tabs',{closed_tabs:JSON.stringify(x),window_id:q.getSessionID()});x=[];y=null;if(z)z={};pa();oa();}},closeFragileTabs:function(){var bb=[];for(var cb=0;cb<x.length;cb++)if(x[cb].fragile&&!v.isNewEmptyLocalThread(x[cb].id)){bb.push(x[cb]);x.splice(cb);oa();break;}ga.log('close_fragile_tabs',{tabs:JSON.stringify(x),fragile_closed:bb,window_id:q.getSessionID()});},closeTab:function(bb,cb){m.isThreadID(bb);var db=false;if(z){delete z[bb];db=true;}na(function(){if(ya(bb))db=true;return db;},(void 0),cb);},raiseTab:function(bb,cb,db){m.isThreadID(bb);var eb=false;if(z&&cb){z[bb]=true;eb=true;}na(function(){if(sa(bb,db))eb=true;var fb=ra(bb);if(fb!=-1&&!x[fb].raised){x[fb].raised=true;eb=true;ga.log('raise_tab',{tabs:JSON.stringify(x),raised:bb,window_id:q.getSessionID()});}return eb;});},get:function(){var bb=x.map(function(cb){var db=t({},cb);delete db.fragile;if(z)db.raised=z[db.id];return db;});return {tabs:bb,promoted:y};},openFragileTab:function(bb){m.isThreadID(bb);if(ta(bb))oa();},openTab:function(bb){m.isThreadID(bb);na(sa.bind(null,bb));},lowerTab:function(bb){m.isThreadID(bb);var cb=false;if(z){delete z[bb];cb=true;}na(function(){var db=ra(bb);if(db!=-1&&x[db].raised){delete x[db].raised;ga.log('lower_tab',{tabs:JSON.stringify(x),lowered:bb,window_id:q.getSessionID()});cb=true;}return cb;});},raiseAndPromoteTab:function(bb,cb,db,eb,fb){m.isThreadID(bb);var gb=false;if(z&&cb){z[bb]=true;gb=true;}na(function(){if(sa(bb,db))gb=true;if(wa(bb)){gb=true;ga.log('raise_and_promote_tab',{tabs:JSON.stringify(x),promoted:bb,window_id:q.getSessionID()});}return gb;},eb,fb);},setPromotedTab:function(bb){m.isThreadID(bb);na(wa.bind(null,bb));},promoteThreadInPlaceOfThread:function(bb,cb,db,eb){m.isThreadID(bb);m.isThreadID(cb);na(function(){var fb=ra(bb),gb=ra(cb);if(eb){y=bb;}else if(y===cb)return true;var hb=x[fb];if(db){m.isThreadID(db);var ib=ra(db),jb=x[gb];x[gb]=hb;x.splice(fb,1);x.splice(ib,0,jb);}else{x[fb]=x[gb];x[gb]=hb;}return true;});},persistLocalRaised:function(){if(z){na(function(){var bb=false;x.forEach(function(cb){if(cb.raised!=z[cb.id]){bb=true;if(z[cb.id]){cb.raised=true;}else delete cb.raised;}});return bb;});ga.log('persist_local_raise',{tabs:JSON.stringify(x),window_id:q.getSessionID()});}}});g.subscribe(l.DUMP_EVENT,function(bb,cb){cb.chat_tabs={promoted:y,tabs:x.map(function(db){return t({},db);}),time:ea,max_load_age:ca};});function ab(){var bb=i.ignoresRemoteTabRaise();if(bb&&!z){ga.log('start_ignore_remote_raise');z={};oa();}else if(!bb&&z){ga.log('stop_ignore_remote_raise');z=null;oa();}}i.subscribe(i.ON_CHANGED,ab);ab();ka(p.getInitial(),true);if(ea===0)ea=ba()-600000;ha=true;e.exports=za;},null);
__d("ChatTitleBarBlinker",["ChatActivity","DocumentTitle","JSLogger","MercuryNotificationRenderer","PresenceState","MercuryThreadInformer","MercuryTimestampTracker"],function(a,b,c,d,e,f,g,h,i,j,k){var l=b('MercuryThreadInformer').get(),m=b('MercuryTimestampTracker').get(),n=i.create('chat_title'),o=null,p=0,q=false;function r(){if(o){o.stop();o=null;return true;}return false;}function s(x){var y=x||m.getLastUserMessageTimestamp();if(p<=y){p=y;if(r()||q)k.doSync();}}var t={blink:function(x,y){if(!o&&p<y)j.renderDocumentTitle(x,function(z){if(!o)o=h.blink(z);});},stopBlinking:function(){s();},blinkingElsewhere:function(){q=true;}};function u(x){var y=k.verifyNumber(x.sb2);if(!y||y<=p)return null;return y;}function v(x){var y=x&&u(x);if(y){p=y;n.debug('load',p);r();q=false;}}function w(x){var y=u(x);if(!y){n.debug('store',p);x.sb2=p;q=false;}return x;}k.registerStateStorer(w);k.registerStateLoader(v);l.subscribe('thread-read-changed',function(x,y){var z=m.getLastUserMessageTimestamp(),aa=0;for(var ba in y)if(y[ba].mark_as_read&&y[ba].timestamp>=z&&y[ba].timestamp>aa)aa=y[ba].timestamp;aa&&s(aa);});g.subscribe('activity',function(){s();});(function(){var x=k.getInitial();if(x)p=u(x)||0;})();e.exports=t;},null);
__d("MercuryTypingReceiver",["Arbiter","ChannelConstants","MercuryActionTypeConstants","MercuryIDs","MercuryPayloadSource","MercuryViewer","TypingStates","mixInEventEmitter","setTimeoutAcrossTransitions","MercuryServerRequests"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=b('MercuryServerRequests').get(),q,r={},s=30000,t={};n(t,{'state-changed':true});function u(aa){var ba=r[aa]||{},ca=Object.keys(ba);ca.sort(function(da,ea){return ba[da]-ba[ea];});return ca;}function v(){q=null;var aa=Date.now(),ba={},ca=false;for(var da in r){var ea=false;for(var fa in r[da]||{})if(r[da][fa]<aa-s){delete r[da][fa];ea=true;}else ca=true;if(ea)ba[da]=u(da);}for(var ga in ba){x(ba);break;}if(ca)q=o(v,3000);}function w(aa,ba){if(aa in r)if(ba in r[aa]){delete r[aa][ba];y(aa);}}function x(aa){t.releaseHeldEventType('state-changed');t.emitAndHold('state-changed',aa);}function y(aa){var ba={};ba[aa]=u(aa);x(ba);}function z(aa){if(aa.thread_fbid)return p.getClientThreadIDNow(aa.thread_fbid);if(aa.type==='typ')return j.getThreadIDFromUserID(aa.from);return null;}g.subscribe([h.getArbiterType('typ'),h.getArbiterType('ttyp')],function(aa,ba){var ca=ba.obj,da=z(ca);if(da){var ea=j.getParticipantIDFromUserID(ca.from);if(ca.st==m.TYPING){r[da]=r[da]||{};var fa=r[da][ea];r[da][ea]=Date.now();if(!q)q=o(v,3000);!fa&&y(da);}else if(ca.st==m.INACTIVE)w(da,ea);}});p.subscribe('update-typing-state',function(aa,ba){var ca=ba.payload_source;if(ca!=k.CLIENT_CHANNEL_MESSAGE)return;var da=ba.actions;if(!da||!da.length)return;var ea=i.USER_GENERATED_MESSAGE;da.forEach(function(fa){if(fa.action_type==ea&&fa.author!=l.getID())w(fa.thread_id,fa.author);});});e.exports=t;},null);
__d("MercuryIndicatorController",["ArbiterMixin","DOM","MercuryActionTypeConstants","MercuryDelayedRoger","MercuryIDs","MercuryMessageSourceTags","MercuryParticipants","MercuryRoger","MercuryTypingReceiver","MercuryViewer","arrayContains","copyProperties","formatDate","removeFromArray","fbt","MercuryThreads"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){var v=b('MercuryThreads').get(),w=[];function x(y){this._threadID=y;this._canonicalUser=k.getUserIDFromThreadID(y);w.push(this);}r(x.prototype,g,{destroy:function(){t(w,this);},setLastMessage:function(y){this._lastMsg=y;this._handleStateChange();},_informStateChanged:function(y){if(y.activity=='none'&&this._currentActivity=='none')return;if(this._lastMsg&&p.isViewer(this._lastMsg.author))y.self_authored=true;this._currentActivity=y.activity;this.inform('state-changed',y);},_notifySentFrom:function(){var y,z,aa=this._lastMsg.location_text,ba=this._lastMsg.source_tags||[];if(aa){y=u._("\u0e2a\u0e48\u0e07\u0e08\u0e32\u0e01 {location}",[u.param("location",aa)]);z='sentFromMobile';}else if(q(ba,l.MESSENGER)){y=h.create('a',{href:'/mobile/messenger','class':'fcg',target:'_blank'},"\u0e2a\u0e48\u0e07\u0e21\u0e32\u0e08\u0e32\u0e01 Messenger");z='sentFromMobile';}else if(q(ba,l.MOBILE)){y=h.create('a',{href:'/mobile','class':'fcg',target:'_blank'},"\u0e2a\u0e48\u0e07\u0e08\u0e32\u0e01\u0e21\u0e37\u0e2d\u0e16\u0e37\u0e2d");z='sentFromMobile';}else if(q(ba,l.EMAIL)){y="\u0e2a\u0e48\u0e07\u0e08\u0e32\u0e01\u0e2d\u0e35\u0e40\u0e21\u0e25";z='sentFromEmail';}else{this._informStateChanged({activity:'none'});return;}this._informStateChanged({activity:z,text:y});},_notifySeenTimestamp:function(y){var z=n.getSeenTimestamp(this._threadID,y[0])*.001,aa=Date.now()*.001,ba;if(z<aa-518400){ba='M j';}else if(z<aa-86400){ba='D g:ia';}else ba='g:ia';this._informStateChanged({activity:'seen-timestamp',text:u._("\u0e2d\u0e48\u0e32\u0e19\u0e40\u0e21\u0e37\u0e48\u0e2d {timestamp}",[u.param("timestamp",s(z,ba))])});},_nameNormalizer:function(y){var z;m.getMulti(y,function(aa){function ba(da){if(aa[da]!==(void 0)){return aa[da].short_name.toLowerCase();}else return da;}var ca=y.map(ba);z=function(da){var ea=ba(da),fa=ca.indexOf(ea)!==ca.lastIndexOf(ea);return fa?aa[da].name:aa[da].short_name;};});return z;},_notifySeenBy:function(y){var z=this._lastMsg,aa=true;m.getMulti(y,function(ba){aa=false;if(this._lastMsg!=z)return;var ca=v.getThreadMetaNow(this._threadID),da=ca?ca.participants.length:0,ea=y.length+(z.author!=p.getID()),fa,ga=false,ha=da>2&&ea>=da-1,ia;if(ca)ia=this._nameNormalizer(ca.participants);if(!ia)ia=function(ma){return ba[ma].short_name;};if(ha){fa="\u0e17\u0e38\u0e01\u0e04\u0e19\u0e40\u0e2b\u0e47\u0e19\u0e41\u0e25\u0e49\u0e27";}else if(y.length==1){fa=u._("{user} \u0e44\u0e14\u0e49\u0e2d\u0e48\u0e32\u0e19\u0e41\u0e25\u0e49\u0e27",[u.param("user",ba[y[0]].short_name)]);}else if(y.length==2){fa=u._("{user1}, {user2} \u0e44\u0e14\u0e49\u0e2d\u0e48\u0e32\u0e19\u0e02\u0e49\u0e2d\u0e04\u0e27\u0e32\u0e21\u0e19\u0e35\u0e49",[u.param("user1",ba[y[0]].short_name),u.param("user2",ba[y[1]].short_name)]);}else if(y.length==3){fa=u._("{user1}, {user2}, {user3} \u0e44\u0e14\u0e49\u0e2d\u0e48\u0e32\u0e19\u0e41\u0e25\u0e49\u0e27",[u.param("user1",ba[y[0]].short_name),u.param("user2",ba[y[1]].short_name),u.param("user3",ba[y[2]].short_name)]);}else if(y.length>3){var ja=Object.keys(ba).length-2,ka=u._("\u0e04\u0e19\u0e2d\u0e37\u0e48\u0e19\u0e46 \u0e2d\u0e35\u0e01 {num} \u0e04\u0e19",[u.param("num",ja)]),la=h.create('span',{className:'more'},ka);fa=u._("{user1}, {user2}, {=num more link} \u0e44\u0e14\u0e49\u0e2d\u0e48\u0e32\u0e19\u0e41\u0e25\u0e49\u0e27",[u.param("user1",ba[y[0]].short_name),u.param("user2",ba[y[1]].short_name),u.param("=num more link",la)]);ga=true;}this._informStateChanged({activity:'seen-by',text:fa,seenBy:y,tooltip:ga});}.bind(this));aa&&this._informStateChanged({activity:'none'});},_notifyTyping:function(y){var z=this._lastMsg,aa=true;m.getMulti(y,function(ba){aa=false;if(this._lastMsg!=z)return;var ca=v.getThreadMetaNow(this._threadID),da=ca?ca.participants.length:0,ea;if(ca)ea=this._nameNormalizer(ca.participants);if(!ea)ea=function(ka){return ba[ka].short_name;};var fa,ga=false;if(da>2&&y.length>=da-1){fa="Everyone is typing...";}else if(y.length==1){fa=u._("{name} \u0e01\u0e33\u0e25\u0e31\u0e07\u0e1e\u0e34\u0e21\u0e1e\u0e4c\u0e2d\u0e22\u0e39\u0e48...",[u.param("name",ba[y[0]].short_name)]);}else if(y.length==2){fa=u._("{user1} and {user2} are typing...",[u.param("user1",ba[y[0]].short_name),u.param("user2",ba[y[1]].short_name)]);}else if(y.length==3){fa=u._("{user1}, {user2}, and {user3} are typing...",[u.param("user1",ba[y[0]].short_name),u.param("user2",ba[y[1]].short_name),u.param("user3",ba[y[2]].short_name)]);}else if(y.length>3){var ha=Object.keys(ba).length-2,ia=u._("\u0e14\u0e39\u0e40\u0e1e\u0e34\u0e48\u0e21 {num} \u0e23\u0e32\u0e22\u0e01\u0e32\u0e23",[u.param("num",ha)]),ja=h.create('a',{href:'#'},ia);fa=u._("{user1}, {user2}, and {=num more link} are typing...",[u.param("user1",ba[y[0]].short_name),u.param("user2",ba[y[1]].short_name),u.param("=num more link",ja)]);ga=true;}this._informStateChanged({activity:'typing',text:fa,typing:y,tooltip:ga});}.bind(this));aa&&this._informStateChanged({activity:'none'});},_handleStateChange:function(){var y=i.LOG_MESSAGE;if(!this._lastMsg||this._lastMsg.action_type==y){this._informStateChanged({activity:'none'});return;}if(this._typing&&this._typing.length){this._notifyTyping(this._typing);return;}if(this._canonicalUser&&this._lastMsg.author!=p.getID()){this._notifySentFrom();return;}var z=j.getSeenBy(this._threadID,true);if(z.length)if(this._canonicalUser){this._notifySeenTimestamp(z);return;}else{this._notifySeenBy(z);return;}this._informStateChanged({activity:'none'});}});o.addRetroactiveListener('state-changed',function(y){w.forEach(function(z){var aa=y[z._threadID];if(aa!==(void 0)){z._typing=aa;z._handleStateChange();}});});j.subscribe('state-changed',function(y,z){w.forEach(function(aa){z[aa._threadID]&&aa._handleStateChange();});});e.exports=x;},null);
__d("MercuryLastMessageIndicator.react",["DOM","MercuryIndicatorController","MercuryParticipants","ReactPropTypes","React","Tooltip","cx","emptyFunction","joinClasses","startsWith"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=k.createClass({displayName:"MercuryLastMessageIndicator",propTypes:{hideTyping:j.bool,indicatorWillShow:j.func,indicatorDidShow:j.func,lastMessage:j.object,threadID:j.string.isRequired},getDefaultProps:function(){return {indicatorWillShow:n,indicatorDidShow:n};},getInitialState:function(){return {data:{}};},componentDidMount:function(){this._setup(this.props);},componentWillReceiveProps:function(r){if(r.threadID!=this.props.threadID){this._destroy();this._setup(r);}else if(r.lastMessage!=this.props.lastMessage)this._controller.setLastMessage(r.lastMessage);},componentWillUpdate:function(r,s){if(this.isVisible(r,s))this.props.indicatorWillShow();},componentDidUpdate:function(){if(!this.isVisible())return;this.setText();this.setTooltip();this.props.indicatorDidShow();},componentWillUnmount:function(){this._destroy();},render:function(){return (k.createElement("div",{className:this.getRootClass()},k.createElement("div",{className:"_510h"}),k.createElement("span",{className:"_510f",ref:"text"}," ")));},getRootClass:function(){var r=(("_510g")+(this.state.data.self_authored?' '+"_510e":'')),s=this.state.data.activity,t=null;if(p(s,'seen')){t='seen';}else if(s=='typing'){t=this.props.hideTyping?null:s;}else t=s;return o(r,t,this.props.className);},isVisible:function(r,s){r=r||this.props;s=s||this.state;return (s.data&&s.data.activity!='none'&&!(r.hideTyping&&s.data.activity=='typing'));},setText:function(){if(this.state.data.text)g.setContent(this.refs.text.getDOMNode(),this.state.data.text);},setTooltip:function(){if(this.state.data.activity=='seen-by'&&this.state.data.tooltip)i.getMulti(this.state.data.seenBy,function(r){var s=g.create('div',null,this.state.data.seenBy.map(function(t){return g.create('div',null,r[t].name);}));l.set(g.find(this.getDOMNode(),'span.more'),s,'above','center');}.bind(this));},_setup:function(r){this._controller=new h(r.threadID);this._subscription=this._controller.subscribe('state-changed',function(s,t){return this.setState({data:t});}.bind(this));r.lastMessage&&this._controller.setLastMessage(r.lastMessage);},_destroy:function(){this._subscription.unsubscribe();this._controller.destroy();},setLastMessage:function(r){this.setProps({lastMessage:r});}});e.exports=q;},null);
__d("MessagesEmoticons.react",["Grid.react","React","cx","emptyFunction","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){var l=g.GridItem,m=8,n={smile:"\u0e22\u0e34\u0e49\u0e21",frown:"\u0e2b\u0e19\u0e49\u0e32\u0e1a\u0e36\u0e49\u0e07",tongue:"\u0e25\u0e34\u0e49\u0e19",grin:"\u0e22\u0e34\u0e49\u0e21\u0e01\u0e27\u0e49\u0e32\u0e07",gasp:"\u0e2d\u0e49\u0e32\u0e1b\u0e32\u0e01\u0e04\u0e49\u0e32\u0e07",wink:"\u0e02\u0e22\u0e34\u0e1a\u0e15\u0e32",pacman:"\u0e41\u0e1e\u0e47\u0e04\u0e41\u0e21\u0e19",grumpy:"\u0e1a\u0e39\u0e14\u0e1a\u0e36\u0e49\u0e07",unsure:"\u0e44\u0e21\u0e48\u0e41\u0e19\u0e48\u0e43\u0e08",cry:"\u0e23\u0e49\u0e2d\u0e07\u0e44\u0e2b\u0e49",kiki:"kiki",glasses:"\u0e41\u0e01\u0e49\u0e27",sunglasses:"\u0e41\u0e27\u0e48\u0e19\u0e01\u0e31\u0e19\u0e41\u0e14\u0e14",heart:"\u0e2b\u0e31\u0e27\u0e43\u0e08",devil:"\u0e1b\u0e35\u0e28\u0e32\u0e08",angel:"\u0e19\u0e32\u0e07\u0e1f\u0e49\u0e32",squint:"\u0e0a\u0e33\u0e40\u0e25\u0e37\u0e2d\u0e07",confused:"\u0e2a\u0e31\u0e1a\u0e2a\u0e19",upset:"\u0e44\u0e21\u0e48\u0e1e\u0e2d\u0e43\u0e08",colonthree:"\u0e40\u0e04\u0e23\u0e37\u0e48\u0e2d\u0e07\u0e2b\u0e21\u0e32\u0e22\u0e2d\u0e31\u0e12\u0e20\u0e32\u0e04 3",like:"\u0e16\u0e39\u0e01\u0e43\u0e08"},o=h.createClass({displayName:"MessagesEmoticons",propTypes:{onEmoticonSelect:h.PropTypes.func},getDefaultProps:function(){return {onEmoticonSelect:j};},getEmoticons:function(){return Object.keys(n).map(function(p){return (h.createElement(l,{key:p},h.createElement("div",{className:"panelCell"},h.createElement("a",{"aria-label":n[p],className:'emoticon emoticon_'+p,onClick:function(){return this.props.onEmoticonSelect(p);}.bind(this)}))));}.bind(this));},render:function(){return (h.createElement("div",{className:"emoticonsTable"},h.createElement(g,{cols:m,alignv:"middle",alignh:"center",spacing:"pam"},this.getEmoticons())));}});e.exports=o;},null);
__d("MercuryStateCheck",["Arbiter","ChannelConstants","MercuryFolders","MessagingTag","URI","copyProperties","MercuryServerRequests"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=b('MercuryServerRequests').get(),n=l(new g(),{initialize:function(){g.subscribe(h.ON_INVALID_HISTORY,o);d(['ChannelConnection'],function(p){p.subscribe(p.CONNECTED,function(q,r){if(!r.init)o();});});}});function o(){var p;if(k.getRequestURI().getPath().search(/messages/)!==-1){p=i.getSupportedFolders();}else p=[j.INBOX];m.fetchMissedMessages(p);}n.initialize();e.exports=n;},null);
__d("XStickerPackImagesControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f){e.exports=b("XControllerURIBuilder").create("\/stickers\/{pack_id}\/images\/",{pack_id:{type:"Int",required:true},sticker_size:{type:"Int"}});},null);
__d("XStickersAddPackControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f){e.exports=b("XControllerURIBuilder").create("\/stickers\/addpack\/",{pack_id:{type:"Int"},size:{type:"String"},redirect_uri:{type:"String"},is_promoted:{type:"Bool"}});},null);
__d("XStickersRemovePackControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f){e.exports=b("XControllerURIBuilder").create("\/stickers\/removepack\/",{pack_id:{type:"Int"},size:{type:"String"},redirect_uri:{type:"String"}});},null);
__d("XStickerStateInitialDataControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f){e.exports=b("XControllerURIBuilder").create("\/stickers\/state\/",{});},null);
__d("XStickerStatePackDataControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f){e.exports=b("XControllerURIBuilder").create("\/stickers\/state\/pack\/",{pack_id:{type:"Int",required:true}});},null);
__d("XStickerStateStoreDataControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f){e.exports=b("XControllerURIBuilder").create("\/stickers\/state\/store\/",{});},null);
__d("XStickerSearchPromotePackControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f){e.exports=b("XControllerURIBuilder").create("\/stickers\/search\/promotePack\/",{sticker_id:{type:"Int",required:true}});},null);
__d("XStickerSearchNUXSeenControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f){e.exports=b("XControllerURIBuilder").create("\/stickers\/searchNUX\/seen\/",{tooltip_only:{type:"Bool"}});},null);
__d("XStickerTagImagesControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f){e.exports=b("XControllerURIBuilder").create("\/stickers\/tag\/images\/",{tag_ids:{type:"IntVector",required:true}});},null);
__d("XStickerTagDataControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f){e.exports=b("XControllerURIBuilder").create("\/stickers\/tag\/data\/",{});},null);
__d("XStickerQueryImagesControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f){e.exports=b("XControllerURIBuilder").create("\/stickers\/query\/images\/",{query:{type:"String",required:true}});},null);
__d("StickerServerRequests",["AsyncRequest","Promise","XStickerPackImagesControllerURIBuilder","XStickersAddPackControllerURIBuilder","XStickersRemovePackControllerURIBuilder","XStickerStateInitialDataControllerURIBuilder","XStickerStatePackDataControllerURIBuilder","XStickerStateStoreDataControllerURIBuilder","XStickerSearchPromotePackControllerURIBuilder","XStickerSearchNUXSeenControllerURIBuilder","XStickerTagImagesControllerURIBuilder","XStickerTagDataControllerURIBuilder","XStickerQueryImagesControllerURIBuilder"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){'use strict';var t={addPack:function(v,w,x){var y=new j().setInt('pack_id',v).setBool('is_promoted',w).getURI();new g(y).setHandler(function(z){return x(z.payload);}).send();},removePack:function(v,w){var x=new k().setInt('pack_id',v).getURI();new g(x).setHandler(function(y){return w(y.payload);}).send();},getStickersForPack:function(v,w){var x=new i().setInt('pack_id',v).setInt('sticker_size',w).getURI();return new h(function(y,z){return new g().setURI(x).setMethod("POST").setHandler(function(aa){return y(aa.payload);}).send();});},getStickersForTags:function(v,w){new g().setURI(new q().setIntVector('tag_ids',v).getURI()).setMethod("POST").setHandler(function(x){return w(x);}).send();},getStickersForQuery:function(v,w){new g().setURI(new s().setString('query',v).getURI()).setMethod("POST").setHandler(function(x){return w(x);}).send();},fetchTrayData:function(v){return u(new l().getURI(),v,true);},fetchStoreData:function(v){return u(new n().getURI(),v);},fetchPackData:function(v,w){return u(new m().setInt('pack_id',v).getURI(),w);},fetchTagData:function(v){return u(new r().getURI(),v,true);},markSeenSearchNUX:function(){new g(new p().setBool('tooltip_only',false).getURI().toString()).send();},markSeenSearchTooltipNUX:function(){new g(new p().setBool('tooltip_only',true).getURI().toString()).send();},promotePackSentFromSearch:function(v,w){var x=new o().setInt('sticker_id',v).getURI();u(x,w,true);}};function u(v,w,x){return new h(function(y,z){return new g(v).setHandler(function(aa){return y(aa.getPayload());}).setAllowCrossPageTransition(x).send();}).then(w);}e.exports=t;},null);
__d("XStickerAssetControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f){e.exports=b("XControllerURIBuilder").create("\/stickers\/asset\/",{sticker_id:{type:"Int",required:true},image_type:{type:"Enum"}});},null);
__d("XLinkshimLogControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f){e.exports=b("XControllerURIBuilder").create("\/si\/ajax\/l\/render_linkshim_log\/",{u:{type:"String",required:true},h:{type:"String",required:true},render_verification:{type:"Bool"},enc:{type:"String"},d:{type:"String"}});},null);
__d("MercuryAttachmentRenderer",["MercuryAttachmentTemplates","MercuryAttachmentAudioClip.react","Bootloader","ChatAnimatedGifs","SyncRequest.react","CSS","MercuryConstants","DOM","Event","MercuryAttachment","MercuryAttachmentType","MercuryAttachmentVideo.react","MercuryIDs","MercuryParticipants","MercuryViewer","ProgressBar","React","Sticker.react","StickerAssetType","StickerImages","Style","URI","UserAgent_DEPRECATED","cx","fbt","invariant","updatePhotoProgressBar","XStickerAssetControllerURIBuilder","OrionMercuryAttachment","MercuryMessages"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha){'use strict';var ia=b('OrionMercuryAttachment').module,ja=b('MercuryMessages').get(),ka=ca.ie()<=8,la=120;function ma(pa,qa){var ra=g[qa].build().setNodeContent('filename',pa.name),sa=ra.getNode('link');sa.setAttribute('href',pa.url);pa.rel&&sa.setAttribute('rel',pa.rel);l.addClass(ra.getRoot(),p.getAttachIconClass(pa.icon_type));return ra;}function na(pa,qa){var ra=g[qa].build().setNodeContent('filename',pa.name);l.addClass(ra.getRoot(),p.getAttachIconClass(pa.icon_type));return ra;}var oa={renderAttachment:function(pa,qa,ra,sa,ta,ua){var va=100,wa=pa?160:400,xa=null,ya=null,za=m.MercurySupportedShareType;if(this.isErrorAttachment(qa))xa=oa.renderError(qa);if(this.isShareAttachment(qa)&&qa.share_xhp)if(qa.share_data_type===za.FB_BROWSE_QUERY||!pa)ya=oa.renderShareXHP(qa,ra.id);if(this.isStickerAttachment(qa))ya=oa.renderSticker(qa,ra,pa,ua);if(!ya&&this.isShareAttachment(qa)){var ab=qa.share_data_type;switch(ab){case za.FB_PHOTO:ya=oa.renderPreview(qa,ra,sa,ta);break;case za.FB_VIDEO:ya=oa.renderVideoThumb(qa);break;case za.FB_MUSIC_ALBUM:case za.FB_SONG:case za.FB_PLAYLIST:case za.FB_MUSICIAN:case za.FB_RADIO_STATION:ya=oa.renderMusic(qa);break;case za.EXTERNAL:case za.FB_TEMPLATE:case za.FB_SOCIAL_REPORT_PHOTO:ya=oa.renderExternalLink(qa);break;case za.FB_COUPON:case za.FB_EVENT:case za.FB_SHOERACK_INVITATION:ya=oa.renderChatXHP(qa);break;case za.FB_SOCIAL_RESOLUTION:case za.FB_STATUS:ya=oa.renderSocialResolution(qa);break;case za.FB_SYNC_REQUEST:ya=oa.renderSyncRequest(qa);break;case za.FB_OPEN_GRAPH:ya=oa.renderOpenGraph(qa);break;case za.FB_ORION:if(ia)ya=oa.renderOrionMercuryAttachment(qa);break;default:if(qa.name)ya=oa.renderShareLink(qa,ra&&ra.id,pa);break;}}if(!ya&&qa.preview_loading)ya=oa.renderPreview(qa,ra,sa,ta);if(!ya&&this.isVideoAttachment(qa)){ya=n.create('div');w.render(oa.renderVideo(qa,pa),ya);}if(!ya&&qa.preview_url)ya=oa.renderPreview(qa,ra,sa,ta);if(!ya&&this.isFileAttachment(qa))if(qa.metadata&&p.isVoiceMessage(qa.metadata.type)){ya=n.create('div');var bb=oa.renderAudioClip(qa,ra.message_id,va,wa);w.render(bb,ya);}else ya=pa?oa.renderFileLink(qa):oa.renderExtendedFileLink(qa);return {error:xa,content:ya,bubblePreferred:this.isBubblePreferred(qa)};},isBubblePreferred:function(pa){return !this.isStickerAttachment(pa)&&!this.isSyncRequestAttachment(pa);},renderError:function(pa){var qa=g[':fb:mercury:attachment:error'].build();n.appendContent(qa.getNode('error'),pa.error_msg);return qa.getRoot();},renderSocialResolution:function(pa){var qa=g[':fb:mercury:attachment:social-resolution'].build();qa.setNodeContent('post',pa.share_xhp);return qa.getRoot();},renderChatXHP:function(pa){var qa=g[':fb:mercury:attachment:social-resolution'].build();qa.setNodeContent('post',pa.chat_xhp);return qa.getRoot();},renderOpenGraph:function(pa){var qa=pa.share_xhp.cloneNode(true);if(ca.firefox())aa.set(qa,'minWidth','180px');return qa;},renderExternalLink:function(pa){var qa=g[':fb:mercury:attachment:external-link'].build().setNodeContent('name',pa.name);pa.base_url&&qa.setNodeContent('shortLink',pa.base_url);var ra=qa.getNode('preview'),sa=qa.getNode('image-link');sa.setAttribute('href',pa.url);pa.rel&&sa.setAttribute('rel',pa.rel);if(pa.preview_url){var ta=qa.getNode('preview-image'),ua=pa.preview_url,va=ba(j.getRawUrlFromSafeUrl(ua));if(pa.animated_gif_uri){ua=ba(pa.animated_gif_uri);l.addClass(ra,"_dri");if(pa.name&&pa.name.__html==va.toString())qa.setNodeContent('name','');}ta.setAttribute('src',ua);l.addClass(ra,pa.preview_class);l.show(ta);}else{l.addClass(qa.getRoot(),'noMedia');l.hide(ra);}qa.getNode('name').setAttribute('href',pa.url);d(['LinkshimHandler'],function(wa){wa.setUpLinkshimHandling(qa.getNode('name'));wa.setUpLinkshimHandling(qa.getNode('image-link'));});if(pa.rel)qa.getNode('name').setAttribute('rel',pa.rel);return qa.getRoot();},renderFileLink:function(pa){var qa=null;if(pa.url===''){qa=':fb:mercury:attachment:file-name';return na(pa,qa).getRoot();}else{qa=':fb:mercury:attachment:file-link';return ma(pa,qa).getRoot();}},renderAudioClip:function(pa,qa,ra,sa){var ta=pa.metadata.duration/1000,ua=200;if(ra&&sa)if(ta<5){ua=ra;}else ua=(1-Math.pow(10,(ta-5)/-30))*(sa-ra)+ra;return w.createElement(h,{src:pa.url,duration:pa.metadata.duration/1000,showHelp:false,width:ua});},renderVideo:function(pa,qa){var ra={height:pa.preview_height,width:pa.preview_width},sa=qa?{width:160,height:120}:{width:266,height:200};return w.createElement(r,{duration:pa.metadata.duration,name:pa.name,pageID:pa.metadata.pageid,size:sa,thumbnailSize:ra,thumbnail:pa.thumbnail_url,videoID:pa.metadata.fbid});},renderExtendedFileLink:function(pa){var qa=null;if(pa.url===''){qa=':fb:mercury:attachment:file-name';return na(pa,qa).getRoot();}qa=':fb:mercury:attachment:extended-file-link';var ra=ma(pa,qa);if(pa.open_url){var sa=ra.getNode('openLinkContainer');l.show(sa);var ta=ra.getNode('openFile');ta.setAttribute('href',pa.open_url);}var ua=ra.getNode('downloadFile');ua.setAttribute('href',pa.url);pa.rel&&ua.setAttribute('rel',pa.rel);return ra.getRoot();},renderMusic:function(pa){var qa=g[':fb:mercury:attachment:music'].build().setNodeContent('filename',pa.name),ra=qa.getNode('link');ra.setAttribute('href',pa.url);ra.setAttribute('target','_blank');pa.rel&&ra.setAttribute('rel',pa.rel);var sa=qa.getNode('image-link');sa.setAttribute('href',pa.url);pa.rel&&sa.setAttribute('rel',pa.rel);var ta=qa.getNode('preview-image');ta.setAttribute('src',pa.preview_url);l.show(ta);l.addClass(qa.getNode('icon_link'),'MercuryMusicIcon');return qa.getRoot();},renderSyncRequest:function(pa){var qa=k(pa.metadata),ra=n.create('div');w.render(qa,ra);return ra;},renderOrionMercuryAttachment:function(pa){var qa=w.createElement(ia,w.__spread({},pa.metadata)),ra=n.create('div');w.render(qa,ra);return ra;},resizeContain:function(pa,qa){var ra=pa.width/pa.height,sa=qa.width/qa.height;if(sa<ra){return {width:Math.min(pa.height*sa,qa.width),height:Math.min(pa.height,qa.height)};}else return {width:Math.min(pa.width,qa.width),height:Math.min(pa.width/sa,qa.height)};},renderPreview:function(pa,qa,ra,sa){var ta=g[':fb:mercury:attachment:preview'].build(),ua=ta.getNode('image-link');if(pa){if(pa.url){var va=new ba(pa.url).getQueryData().uri;if(va&&pa.rel==='async'){ua.setAttribute('href',va);ua.setAttribute('ajaxify',pa.url);}else ua.setAttribute('href',pa.url);}pa.rel&&ua.setAttribute('rel',pa.rel);var wa;if(pa.preview_uploading){var xa=ta.getNode('cancel-button-container');l.show(xa);var ya=ta.getNode('cancel-button'),za=o.listen(ya,'click',function(){pa.upload_canceled(pa.upload_id);l.hide(ta.getRoot());za.remove();});pa.on_success(function(event,hb){if(hb.upload_id==pa.upload_id){l.hide(xa);za.remove();}});var ab=ta.getNode('progress-bar'),bb=new v(ab),cb=ta.getNode('progress-bar-container');fa(pa.upload_id);pa.on_progress(function(event,hb){if(hb.upload_id==pa.upload_id){l.removeClass(cb,"_395w");l.show(cb);ga(bb,hb.event);}});if(pa.on_resizing_progress)pa.on_resizing_progress(function(event,hb){if(hb.upload_id==pa.upload_id){l.addClass(cb,"_395w");l.show(cb);bb.setPosition(100*hb.event.written/hb.event.total);}});l.addClass(ua,"_57jm");if(ra>=176){wa='/images/photos/dots_large.png';}else if(ra>=86){wa='/images/photos/dots_medium.png';}else wa='/images/photos/dots_small.png';aa.set(ua,'width',ra+'px');aa.set(ua,'max-width',ra+'px');if(pa.preview_width&&pa.preview_height)aa.set(ua,'padding-bottom',((pa.preview_height/pa.preview_width)*100)+'%');}else if(pa.preview_loading){l.addClass(ua,"_5xdv");if(sa==='contain'&&pa.preview_width&&pa.preview_height){aa.set(ua,'width',pa.preview_width+'px');aa.set(ua,'height',pa.preview_height+'px');}if(sa==='cover'&&!ka)l.addClass(ua,"_55pj");}else if(pa.metadata&&pa.metadata.fbid){wa=ba('/ajax/mercury/attachments/photo.php').addQueryData({fbid:pa.metadata.fbid,request_user_id:pa.metadata.pageid,mode:sa,width:ra,height:ra}).toString();var db=ua.getAttribute('ajaxify');ua.removeAttribute('ajaxify');ua.removeAttribute('rel');o.listen(ua,'click',function(event){event.prevent();i.loadModules(["MessagesViewer"],function(hb){hb.bootstrapWithConfig({src:wa,endpoint:db,fbid:pa.metadata.fbid,dimensions:pa.metadata.dimensions,disablePaging:qa&&qa.attachments.length==1},ua);});});}else{var eb=ba(pa.preview_url);sa&&eb.addQueryData({mode:sa});ra&&eb.addQueryData({width:ra,height:ra});wa=eb.toString();}var fb=ta.getNode('preview-image');if(wa){if(sa==='contain'&&pa.preview_width&&pa.preview_height){var gb=oa.resizeContain({width:ra,height:ra},{width:pa.preview_width,height:pa.preview_height});fb.setAttribute('width',gb.width);fb.setAttribute('height',gb.height);}if(pa.preview_uploading||(sa==='cover'&&!ka)){l.addClass(ua,"_55pj");aa.set(ua,'backgroundImage','url('+wa+')');}else{fb.onload=function(){fb.removeAttribute('width');fb.removeAttribute('height');};fb.setAttribute('src',wa);}}if(qa)this.renderReportRespondLink(ta.getRoot(),pa,qa.message_id);}return ta.getRoot();},renderShareLink:function(pa,qa,ra){var sa=g[':fb:mercury:attachment:share-link'].build().setNodeContent('name',pa.name),ta=sa.getNode('link');ta.setAttribute('href',pa.url);pa.rel&&ta.setAttribute('rel',pa.rel);return sa.getRoot();},renderVideoThumb:function(pa){var qa=g[':fb:mercury:attachment:video-thumb'].build(),ra=qa.getNode('thumb');ra.setAttribute('href',pa.url);ra.setAttribute('rel',pa.rel);var sa=n.find(qa.getRoot(),'img');sa.src=pa.preview_url;return qa.getRoot();},renderShareXHP:function(pa,qa){var ra=n.create('div');if(pa){n.appendContent(ra,pa.share_xhp);this.renderReportRespondLink(ra,pa,qa);}return ra;},renderSticker:function(pa,qa,ra,sa){var ta=ra?'chatScrolled/':'messengerScrolled/';ta+=qa.thread_id;var ua=n.create('div');l.addClass(ua,'stickerContainer');if(!pa.metadata){var va=z.getSticker(qa.sticker_id),wa=Object.assign({},va);if(va.height>va.width){wa.height=la;wa.width=va.width*la/va.height;}else{wa.width=la;wa.height=va.height*la/va.width;}wa.stickerID=qa.sticker_id;wa.spriteURI='';wa.spriteURI2x='';wa.paddedSpriteURI='';wa.paddedSpriteURI2x='';pa.metadata=wa;}var xa=null;if(pa.metadata.stickerID)xa=pa.metadata.stickerID.toString();var ya=null;if(pa.metadata.packID)ya=pa.metadata.packID.toString();var za=new ha().setInt('sticker_id',xa),ab=null,bb=null;if(window.devicePixelRatio&&window.devicePixelRatio>1){bb=pa.metadata.paddedSpriteURI2x;ab=pa.metadata.spriteURI2x;}else{bb=pa.metadata.paddedSpriteURI;ab=pa.metadata.spriteURI;}var cb=w.createElement(x,{animationTrigger:"hover",className:"mvs",frameCount:pa.metadata.frameCount||1,frameRate:pa.metadata.frameRate||83,framesPerCol:pa.metadata.framesPerCol||1,framesPerRow:pa.metadata.framesPerRow||1,onStickerClick:sa,packID:ya,paddedSpriteURI:bb,sourceHeight:pa.metadata.height,sourceURI:za.setEnum('image_type',y.IMAGE).getURI().toString(),sourceWidth:pa.metadata.width,spriteURI:ab,stickerID:xa,subscribedThreadID:ta});w.render(cb,ua);return ua;},renderReportRespondLink:function(pa,qa,ra){if(!qa.is_social_report_attachment)return null;switch(qa.share_data_type){case m.MercurySupportedShareType.FB_PHOTO:break;case m.MercurySupportedShareType.FB_SOCIAL_REPORT_PHOTO:return null;default:return null;}var sa=null;if(ra)sa=ja.getMessagesFromIDs([ra])[0];if(!sa)return null;if(sa.author===u.getID())return null;var ta=null;t.get(sa.author,function(ua){ta=n.create('a',{rel:'dialog-post',className:"_z6l",id:'respond-link',ajaxify:ba('/ajax/report/social_resolution/post/').setQueryData({attachment_fbid:qa.attach_id,post_fbid:qa.shared_object_id,sender_id:s.getUserIDFromParticipantID(ua.id)}).toString()});n.setContent(ta,ea._("\u0e15\u0e2d\u0e1a\u0e23\u0e31\u0e1a\u0e04\u0e33\u0e23\u0e49\u0e2d\u0e07\u0e02\u0e2d\u0e02\u0e2d\u0e07 {name}",[ea.param("name",ua.name)]));n.appendContent(pa,ta);});},renderPhotoAttachments:function(pa,qa,ra,sa){var ta=pa.length;if(!ta)return null;var ua=n.create('div',{className:"_55pk"});if(ta===1){var va=oa.renderPreview(pa[0],qa,ra,'contain');n.appendContent(ua,va);return ua;}var wa=(ta==2||ta==4)?2:3,xa=(ra-(wa-1)*sa)/wa,ya=Math.ceil(ta/wa),za=ya*xa+(ya-1)*sa,ab=n.create('div',{className:"_55pm",style:'padding-bottom: '+(za/ra*100)+'%;'});n.appendContent(ua,ab);for(var bb=0;bb<ta;++bb){var cb=oa.renderPreview(pa[bb],qa,xa,'cover'),db=bb%wa,eb=Math.floor(bb/wa);l.addClass(cb,"_55pn");aa.apply(cb,{width:(xa/ra*100)+'%',left:((db*(xa+sa))/ra*100)+'%',top:((eb*(xa+sa))/za*100)+'%'});n.appendContent(ab,cb);}return ua;},isPhotoAttachment:function(pa){return pa.attach_type==q.PHOTO||(pa.attach_type==q.FILE&&pa.preview_url);},isVideoAttachment:function(pa){return pa.attach_type==q.VIDEO;},isShareAttachment:function(pa){return pa.attach_type==q.SHARE;},isFileAttachment:function(pa){return pa.attach_type==q.FILE;},isErrorAttachment:function(pa){return pa.attach_type==q.ERROR;},isStickerAttachment:function(pa){return pa.attach_type==q.STICKER;},isSyncRequestAttachment:function(pa){var qa=m.MercurySupportedShareType;return this.isShareAttachment(pa)&&pa.share_data_type==qa.FB_SYNC_REQUEST;},sortAttachmentsStablyByType:function(pa){var qa=[oa.isPhotoAttachment,oa.isShareAttachment,oa.isFileAttachment,oa.isErrorAttachment];qa.push(function(sa){return true;});var ra=qa.map(function(sa){return [];});pa.forEach(function(sa){for(var ta=0;ta<qa.length;ta++)if(qa[ta](sa)){ra[ta].push(sa);break;}});return Array.prototype.concat.apply([],ra);}};e.exports=oa;},null);
__d("MercuryLogMessageRenderer",["MercuryAttachmentRenderer","CSS","DOM","HovercardLink","MercuryViewer","MercuryLogMessageType","MercuryParticipants","React","Image.react","TooltipLink.react","cx","fbt","ix","OrionMercuryLogMessage"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=b('OrionMercuryLogMessage').module,u={renderText:function(oa,pa){switch(oa.log_message_type){case l.SUBSCRIBE:w(oa,pa);break;case l.UNSUBSCRIBE:ba(oa,pa);break;case l.VIDEO_CALL:ca(oa,pa);break;case l.PHONE_CALL:ea(oa,pa);break;case l.THREAD_NAME:fa(oa,pa);break;case l.THREAD_IMAGE:ga(oa,pa);break;case l.WALLPAPER:ha(oa,pa);break;case l.SERVER_ERROR:ia(oa,pa);break;case l.ORION:if(t)ja(oa,pa);break;}},renderIcon:function(oa){return (n.createElement(o,{className:v(oa),src:s('images/spacer.gif')}));},renderLegacy:function(oa,pa,qa,ra){v(ra).split(' ').forEach(function(sa){return sa&&h.addClass(oa,sa);});this.renderText(ra,function(sa){n.render(n.createElement("span",null,sa),pa);});this.renderAttachmentLegacy(qa,ra);},renderAttachmentLegacy:function(oa,pa){if(pa.log_message_type==l.THREAD_IMAGE){var qa=pa.log_message_data.image;if(qa){var ra=g.renderPreview(qa.preview_url?qa:null);i.setContent(oa,ra);h.addClass(ra,"_z6a");h.show(oa);}}}};e.exports=u;function v(oa){var pa=oa.log_message_type,qa=oa.log_message_data;return (("_5wzu")+(pa==l.SUBSCRIBE?' '+"_5wzj":'')+(pa==l.UNSUBSCRIBE?' '+"_5wzk":'')+(pa==l.THREAD_NAME?' '+"_5wzl":'')+(pa==l.THREAD_IMAGE?' '+"_5wzm":'')+(pa==l.VIDEO_CALL&&(qa.answered||na(oa))?' '+"_5wzn":'')+(pa==l.VIDEO_CALL&&!(qa.answered||na(oa))?' '+"_5wzo":'')+(pa==l.PHONE_CALL&&qa.answered?' '+"_5wzp":'')+(pa==l.PHONE_CALL&&!qa.answered?' '+"_5wzq":'')+(pa==l.SERVER_ERROR?' '+"_5wzr":''));}function w(oa,pa){var qa=ma(oa.log_message_data.added_participants);switch(qa.length){case 1:x(oa,pa,qa);break;case 2:y(oa,pa,qa);break;case 3:z(oa,pa,qa);break;default:aa(oa,pa,qa);break;}}function x(oa,pa,qa){var ra=[oa.author,qa[0]];m.getMulti(ra,function(sa){if(oa.author==k.getID()){pa(r._("\u0e04\u0e38\u0e13\u0e40\u0e1e\u0e34\u0e48\u0e21 {subscriber1} \u0e41\u0e25\u0e49\u0e27",[r.param("subscriber1",la(sa[qa[0]]))]));}else if(qa[0]==k.getID()){pa(r._("{actor} \u0e44\u0e14\u0e49\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e04\u0e38\u0e13",[r.param("actor",la(sa[oa.author]))]));}else pa(r._("{actor} \u0e40\u0e1e\u0e34\u0e48\u0e21\u0e41\u0e25\u0e49\u0e27 {subscriber1}",[r.param("actor",la(sa[oa.author])),r.param("subscriber1",la(sa[qa[0]]))]));});}function y(oa,pa,qa){var ra=[oa.author].concat(qa);m.getMulti(ra,function(sa){if(oa.author==k.getID()){pa(r._("\u0e04\u0e38\u0e13\u0e40\u0e1e\u0e34\u0e48\u0e21 {subscriber1} \u0e41\u0e25\u0e30 {subscriber2}",[r.param("subscriber1",la(sa[qa[0]])),r.param("subscriber2",la(sa[qa[1]]))]));}else if(qa[0]==k.getID()){pa(r._("{actor} \u0e44\u0e14\u0e49\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e04\u0e38\u0e13\u0e41\u0e25\u0e30 {subscriber2}",[r.param("actor",la(sa[oa.author])),r.param("subscriber2",la(sa[qa[1]]))]));}else pa(r._("{actor} \u0e40\u0e1e\u0e34\u0e48\u0e21 {subscriber1} \u0e41\u0e25\u0e30 {subscriber2} \u0e41\u0e25\u0e49\u0e27",[r.param("actor",la(sa[oa.author])),r.param("subscriber1",la(sa[qa[0]])),r.param("subscriber2",la(sa[qa[1]]))]));});}function z(oa,pa,qa){var ra=[oa.author].concat(qa);m.getMulti(ra,function(sa){if(oa.author==k.getID()){pa(r._("\u0e04\u0e38\u0e13\u0e40\u0e1e\u0e34\u0e48\u0e21 {subscriber1}, {subscriber2} \u0e41\u0e25\u0e30 {subscriber3} \u0e41\u0e25\u0e49\u0e27",[r.param("subscriber1",la(sa[qa[0]])),r.param("subscriber2",la(sa[qa[1]])),r.param("subscriber3",la(sa[qa[2]]))]));}else if(qa[0]==k.getID()){pa(r._("{actor} \u0e44\u0e14\u0e49\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e04\u0e38\u0e13 {subscriber2} \u0e41\u0e25\u0e30 {subscriber3}",[r.param("actor",la(sa[oa.author])),r.param("subscriber2",la(sa[qa[1]])),r.param("subscriber3",la(sa[qa[2]]))]));}else pa(r._("{actor} \u0e40\u0e1e\u0e34\u0e48\u0e21 {subscriber1}, {subscriber2} \u0e41\u0e25\u0e30 {subscriber3} \u0e41\u0e25\u0e49\u0e27",[r.param("actor",la(sa[oa.author])),r.param("subscriber1",la(sa[qa[0]])),r.param("subscriber2",la(sa[qa[1]])),r.param("subscriber3",la(sa[qa[2]]))]));});}function aa(oa,pa,qa){var ra=[oa.author].concat(qa);m.getMulti(ra,function(sa){function ta(va){var wa=n.createElement("div",null,va.map(function(xa){return n.createElement("div",null,xa.name);}));return (n.createElement(p,{alignH:"center",position:"above",tooltip:wa},r._("\u0e2d\u0e35\u0e01 {num}",[r.param("num",va.length)])));}var ua=qa.map(function(va){return sa[va];});if(oa.author==k.getID()){pa(r._("\u0e04\u0e38\u0e13\u0e40\u0e1e\u0e34\u0e48\u0e21 {subscriber1}, {subscriber2} \u0e41\u0e25\u0e30 {more_people} \u0e41\u0e25\u0e49\u0e27",[r.param("subscriber1",la(ua[0])),r.param("subscriber2",la(ua[1])),r.param("more_people",ta(ua.slice(2)))]));}else if(qa[0]==k.getID()){pa(r._("{actor} \u0e44\u0e14\u0e49\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e04\u0e38\u0e13, {subscriber2} \u0e41\u0e25\u0e30{more_people}",[r.param("actor",la(sa[oa.author])),r.param("subscriber2",la(ua[1])),r.param("more_people",ta(ua.slice(2)))]));}else pa(r._("{actor} \u0e40\u0e1e\u0e34\u0e48\u0e21 {subscriber1}, {subscriber2} \u0e41\u0e25\u0e30 {more_people} \u0e41\u0e25\u0e49\u0e27",[r.param("actor",la(sa[oa.author])),r.param("subscriber1",la(ua[0])),r.param("subscriber2",la(ua[1])),r.param("more_people",ta(ua.slice(2)))]));});}function ba(oa,pa){var qa=[oa.author],ra=oa.log_message_data.removed_participants,sa;if(ra.length===1){sa=ra[0];qa.push(sa);}m.getMulti(qa,function(ta){var ua=ta[oa.author],va=ta[sa];if(oa.author==k.getID()){if(!sa||sa==oa.author){pa("\u0e04\u0e38\u0e13\u0e2d\u0e2d\u0e01\u0e08\u0e32\u0e01\u0e01\u0e32\u0e23\u0e2a\u0e19\u0e17\u0e19\u0e32\u0e41\u0e25\u0e49\u0e27");}else pa(r._("\u0e04\u0e38\u0e13\u0e44\u0e14\u0e49\u0e25\u0e1a {name} \u0e2d\u0e2d\u0e01\u0e08\u0e32\u0e01\u0e01\u0e32\u0e23\u0e2a\u0e19\u0e17\u0e19\u0e32\u0e19\u0e35\u0e49\u0e41\u0e25\u0e49\u0e27",[r.param("name",la(va))]));}else if(!sa||sa==oa.author){pa(r._("{actor} \u0e2d\u0e2d\u0e01\u0e08\u0e32\u0e01\u0e01\u0e32\u0e23\u0e2a\u0e19\u0e17\u0e19\u0e32",[r.param("actor",la(ua))]));}else if(sa==k.getID()){pa(r._("{actor} \u0e44\u0e14\u0e49\u0e25\u0e1a\u0e04\u0e38\u0e13\u0e2d\u0e2d\u0e01\u0e08\u0e32\u0e01\u0e01\u0e32\u0e23\u0e2a\u0e19\u0e17\u0e19\u0e32\u0e19\u0e35\u0e49\u0e41\u0e25\u0e49\u0e27",[r.param("actor",la(ua))]));}else pa(r._("{actor} \u0e44\u0e14\u0e49\u0e25\u0e1a {name} \u0e2d\u0e2d\u0e01\u0e08\u0e32\u0e01\u0e01\u0e32\u0e23\u0e2a\u0e19\u0e17\u0e19\u0e32\u0e19\u0e35\u0e49",[r.param("actor",la(ua)),r.param("name",la(va))]));});}function ca(oa,pa){if(na(oa)){da(oa,pa);return;}var qa=oa.log_message_data.caller,ra=oa.log_message_data.callee,sa=[qa,ra];m.getMulti(sa,function(ta){var ua=ka(ta[ra]);if(qa==k.getID()){if(oa.log_message_data.answered){pa(r._("\u0e04\u0e38\u0e13\u0e42\u0e17\u0e23\u0e2b\u0e32 {firstname}",[r.param("firstname",ua)]));}else pa(r._("{firstname} \u0e44\u0e21\u0e48\u0e44\u0e14\u0e49\u0e23\u0e31\u0e1a\u0e2a\u0e32\u0e22\u0e08\u0e32\u0e01\u0e04\u0e38\u0e13",[r.param("firstname",ua)]));}else{var va=ka(ta[qa]);if(oa.log_message_data.answered){pa(r._("{firstname} \u0e42\u0e17\u0e23\u0e2b\u0e32\u0e04\u0e38\u0e13",[r.param("firstname",va)]));}else pa(r._("\u0e04\u0e38\u0e13\u0e44\u0e21\u0e48\u0e44\u0e14\u0e49\u0e23\u0e31\u0e1a\u0e2a\u0e32\u0e22\u0e08\u0e32\u0e01 {firstname}",[r.param("firstname",va)]));}});}function da(oa,pa){m.get(oa.log_message_data.callee,function(qa){var ra=ka(qa);switch(oa.log_message_data.event_name){case 'installing':pa(r._("{firstname} \u0e01\u0e33\u0e25\u0e31\u0e07\u0e15\u0e31\u0e49\u0e07\u0e04\u0e48\u0e32\u0e01\u0e32\u0e23\u0e04\u0e38\u0e22\u0e41\u0e1a\u0e1a\u0e40\u0e2b\u0e47\u0e19\u0e2b\u0e19\u0e49\u0e32...",[r.param("firstname",ra)]));break;case 'installed':pa(r._("{firstname} \u0e15\u0e31\u0e49\u0e07\u0e04\u0e48\u0e32\u0e01\u0e32\u0e23\u0e04\u0e38\u0e22\u0e41\u0e1a\u0e1a\u0e40\u0e2b\u0e47\u0e19\u0e2b\u0e19\u0e49\u0e32\u0e40\u0e2a\u0e23\u0e47\u0e08\u0e41\u0e25\u0e49\u0e27",[r.param("firstname",ra)]));break;case 'install_canceled':pa("\u0e04\u0e38\u0e13\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01\u0e01\u0e32\u0e23\u0e15\u0e34\u0e14\u0e15\u0e31\u0e49\u0e07\u0e01\u0e32\u0e23\u0e04\u0e38\u0e22\u0e41\u0e1a\u0e1a\u0e40\u0e2b\u0e47\u0e19\u0e2b\u0e19\u0e49\u0e32");break;}});}function ea(oa,pa){var qa=oa.log_message_data.caller,ra=oa.log_message_data.callee,sa=[qa,ra];m.getMulti(sa,function(ta){if(qa==k.getID()){var ua=ka(ta[ra]);if(oa.log_message_data.answered){pa(r._("\u0e04\u0e38\u0e13\u0e42\u0e17\u0e23\u0e2b\u0e32 {firstname}",[r.param("firstname",ua)]));}else pa(r._("{firstname} \u0e44\u0e21\u0e48\u0e44\u0e14\u0e49\u0e23\u0e31\u0e1a\u0e2a\u0e32\u0e22\u0e08\u0e32\u0e01\u0e04\u0e38\u0e13",[r.param("firstname",ua)]));}else{var va=ka(ta[qa]);if(oa.log_message_data.answered){pa(r._("{firstname} \u0e42\u0e17\u0e23\u0e2b\u0e32\u0e04\u0e38\u0e13",[r.param("firstname",va)]));}else pa(r._("\u0e04\u0e38\u0e13\u0e44\u0e21\u0e48\u0e44\u0e14\u0e49\u0e23\u0e31\u0e1a\u0e2a\u0e32\u0e22\u0e08\u0e32\u0e01 {firstname}",[r.param("firstname",va)]));}});}function fa(oa,pa){var qa=oa.log_message_data.name;if(oa.author==k.getID()){if(qa){pa(r._("\u0e04\u0e38\u0e13\u0e15\u0e31\u0e49\u0e07\u0e0a\u0e37\u0e48\u0e2d\u0e01\u0e32\u0e23\u0e2a\u0e19\u0e17\u0e19\u0e32: {name}",[r.param("name",n.createElement("span",{className:"_5wzs"},qa))]));}else pa("\u0e04\u0e38\u0e13\u0e25\u0e1a\u0e0a\u0e37\u0e48\u0e2d\u0e01\u0e32\u0e23\u0e2a\u0e19\u0e17\u0e19\u0e32");}else m.get(oa.author,function(ra){var sa=la(ra);if(qa){pa(r._("{actor} \u0e15\u0e31\u0e49\u0e07\u0e0a\u0e37\u0e48\u0e2d\u0e01\u0e32\u0e23\u0e2a\u0e19\u0e17\u0e19\u0e32: {name}",[r.param("actor",sa),r.param("name",n.createElement("span",{className:"_5wzs"},qa))]));}else pa(r._("{actor} \u0e25\u0e1a\u0e0a\u0e37\u0e48\u0e2d\u0e01\u0e32\u0e23\u0e2a\u0e19\u0e17\u0e19\u0e32",[r.param("actor",sa)]));});}function ga(oa,pa){if(oa.author==k.getID()){if(oa.log_message_data.image){pa("\u0e04\u0e38\u0e13\u0e40\u0e1b\u0e25\u0e35\u0e48\u0e22\u0e19\u0e23\u0e39\u0e1b\u0e20\u0e32\u0e1e\u0e01\u0e32\u0e23\u0e2a\u0e19\u0e17\u0e19\u0e32");}else pa("\u0e04\u0e38\u0e13\u0e25\u0e1a\u0e23\u0e39\u0e1b\u0e20\u0e32\u0e1e\u0e01\u0e32\u0e23\u0e2a\u0e19\u0e17\u0e19\u0e32");}else m.get(oa.author,function(qa){var ra=la(qa);if(oa.log_message_data.image){pa(r._("{actor} \u0e40\u0e1b\u0e25\u0e35\u0e48\u0e22\u0e19\u0e23\u0e39\u0e1b\u0e20\u0e32\u0e1e\u0e01\u0e32\u0e23\u0e2a\u0e19\u0e17\u0e19\u0e32",[r.param("actor",ra)]));}else pa(r._("{actor} \u0e25\u0e1a\u0e23\u0e39\u0e1b\u0e20\u0e32\u0e1e\u0e01\u0e32\u0e23\u0e2a\u0e19\u0e17\u0e19\u0e32",[r.param("actor",ra)]));});}function ha(oa,pa){if(oa.author==k.getID()){pa("\u0e04\u0e38\u0e13\u0e40\u0e1b\u0e25\u0e35\u0e48\u0e22\u0e19\u0e27\u0e2d\u0e25\u0e40\u0e1b\u0e40\u0e1b\u0e2d\u0e23\u0e4c");}else m.get(oa.author,function(qa){var ra=la(qa);pa(r._("{actor} \u0e40\u0e1b\u0e25\u0e35\u0e48\u0e22\u0e19\u0e27\u0e2d\u0e25\u0e40\u0e1b\u0e40\u0e1b\u0e2d\u0e23\u0e4c",[r.param("actor",ra)]));});}function ia(oa,pa){pa("Couldn't find previous messages.");}function ja(oa,pa){var qa=oa.log_message_data,ra=qa.senderId,sa=qa.receiverId,ta=ra===k.getID();m.getMulti([ra,sa],function(ua){pa(n.createElement(t,n.__spread({},qa,{receiverParticipant:ua[sa],senderParticipant:ua[ra],viewerIsSender:ta})));});}function ka(oa){return la(oa,true);}function la(oa,pa){var qa=oa.fbid,ra=j.constructEndpoint({id:qa});if(oa.href)return (n.createElement("a",{className:"_5wzt",href:oa.href,"data-hovercard":ra},pa?oa.short_name:oa.name));return oa.name;}function ma(oa){var pa=oa.indexOf(k.getID());if(pa>0){var qa=oa.filter(function(ra){return ra!==k.getID();});return [k.getID()].concat(qa);}return oa;}function na(oa){return oa.log_message_data.event_name==='installing'||oa.log_message_data.event_name==='installed'||oa.log_message_data.event_name==='install_canceled';}},null);
__d("MercuryReadOnlyReason",["React","fbt"],function(a,b,c,d,e,f,g,h){var i={getReason:function(j){if(j.has_email_participant){return (h._("\u0e02\u0e2d\u0e2d\u0e20\u0e31\u0e22 \u0e1a\u0e17\u0e2a\u0e19\u0e17\u0e19\u0e32\u0e19\u0e35\u0e49\u0e44\u0e21\u0e48\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19\u0e44\u0e14\u0e49\u0e2d\u0e35\u0e01\u0e15\u0e48\u0e2d\u0e44\u0e1b\u0e40\u0e19\u0e37\u0e48\u0e2d\u0e07\u0e08\u0e32\u0e01\u0e44\u0e21\u0e48\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e2a\u0e48\u0e07\u0e02\u0e49\u0e2d\u0e04\u0e27\u0e32\u0e21\u0e44\u0e1b\u0e22\u0e31\u0e07\u0e17\u0e35\u0e48\u0e2d\u0e22\u0e39\u0e48\u0e2d\u0e35\u0e40\u0e21\u0e25\u0e44\u0e14\u0e49\u0e2d\u0e35\u0e01 \u0e02\u0e49\u0e2d\u0e04\u0e27\u0e32\u0e21\u0e17\u0e35\u0e48\u0e2a\u0e48\u0e07\u0e16\u0e36\u0e07\u0e17\u0e35\u0e48\u0e2d\u0e22\u0e39\u0e48\u0e2d\u0e35\u0e40\u0e21\u0e25 facebook.com \u0e08\u0e30\u0e16\u0e39\u0e01\u0e2a\u0e48\u0e07\u0e15\u0e48\u0e2d\u0e44\u0e1b\u0e22\u0e31\u0e07\u0e17\u0e35\u0e48\u0e2d\u0e22\u0e39\u0e48\u0e2d\u0e35\u0e40\u0e21\u0e25\u0e2b\u0e25\u0e31\u0e01 \u0e04\u0e38\u0e13\u0e08\u0e36\u0e07\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e2a\u0e19\u0e17\u0e19\u0e32\u0e15\u0e48\u0e2d\u0e44\u0e14\u0e49\u0e17\u0e32\u0e07\u0e2d\u0e35\u0e40\u0e21\u0e25 {Learn more}",[h.param("Learn more",g.createElement("a",{href:"/help/224049364288051"},"\u0e40\u0e23\u0e35\u0e22\u0e19\u0e23\u0e39\u0e49\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e40\u0e15\u0e34\u0e21"))]));}else return ("\u0e04\u0e38\u0e13\u0e44\u0e21\u0e48\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e15\u0e2d\u0e1a\u0e01\u0e25\u0e31\u0e1a\u0e01\u0e32\u0e23\u0e2a\u0e19\u0e17\u0e19\u0e32\u0e19\u0e35\u0e49\u0e44\u0e14\u0e49");}};e.exports=i;},null);
__d("MercurySheetPolicy",[],function(a,b,c,d,e,f){var g={canReplaceOpenSheet:function(h,i){if(h.isSheetWithInput&&h.isSheetWithInput())return i.getType()!=h.getType()&&i.isSheetWithInput&&i.isSheetWithInput();if(h.getType()==i.getType())return false;if(h.isPermanent()&&!i.isPermanent())return false;return true;}};e.exports=g;},null);
__d("MercurySheetView",["Animation","ArbiterMixin","MercurySheetPolicy","CSS","DOM","Style","MercurySheetTemplates","Vector","copyProperties","cx","setTimeoutAcrossTransitions"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=5000,s=function(t,u,v){this._threadID=t;this._rootElement=u;this._tabMainElement=v;this._openSheet=null;};o(s.prototype,h,{destroy:function(){k.empty(this._rootElement);},_openCommon:function(t,u){if(this._openSheet&&!i.canReplaceOpenSheet(this._openSheet,t)){if(t.couldNotReplace)t.couldNotReplace();return;}this.clear(function(){this._openSheet=t;var v=m[':fb:mercury:tab-sheet:loading'].build().getRoot();k.setContent(this._rootElement,v);j.show(v);j.show(this._rootElement);t.render();if(u){j.addClass(this._tabMainElement,'sheetSlide');j.addClass(this._tabMainElement,"_1sk4");var w=n.getElementDimensions(this._rootElement).y;l.set(this._rootElement,'bottom',w+'px');this.resize();this._animation=new g(this._rootElement).to('bottom',0).duration(150).ease(g.ease.both).ondone(function(){j.removeClass(this._tabMainElement,'sheetSlide');j.removeClass(this._tabMainElement,"_1sk4");this.resize();}.bind(this)).go();}else this.resize();if(!t.isPermanent()){var x=r;if(t.getCloseTimeout)x=t.getCloseTimeout();var y=this.getAutoCloseCallback(t);this._sheetCloseHandler=q(this.close.bind(this,t,y),x);if(t.timeoutCanBeReset)t.setResetTimeoutCallback(this.resetTimeout.bind(this));}}.bind(this));},getAutoCloseCallback:function(t){if(!t.autoCloseCallback)return null;return t.autoCloseCallback.bind(t);},resetTimeout:function(t,u){clearTimeout(this._sheetCloseHandler);var v=this.getAutoCloseCallback(t);this._sheetCloseHandler=q(this.close.bind(this,t,v),u);},set:function(t){return this._openCommon(t,false);},open:function(t){return this._openCommon(t,true);},close:function(t,u){if(this._openSheet!=t)return;if(!this._openSheet){u&&u();return;}if(this._animation)this._animation.stop();if(this._sheetCloseHandler){clearTimeout(this._sheetCloseHandler);this._sheetCloseHandler=null;}j.addClass(this._tabMainElement,'sheetSlide');j.addClass(this._tabMainElement,"_1sk4");var v=n.getElementDimensions(this._rootElement).y;this.resize();this._animation=new g(this._rootElement).to('bottom',v+'px').duration(100).ease(g.ease.begin).ondone(function(){k.empty(this._rootElement);j.hide(this._rootElement);j.removeClass(this._tabMainElement,'sheetSlide');j.removeClass(this._tabMainElement,"_1sk4");this._openSheet=null;this.resize();u&&u();}.bind(this)).go();},clear:function(t){this.close(this._openSheet,t);},resize:function(){this.inform('resize');}});e.exports=s;},null);
__d("MercuryTypeahead",["Event","ArbiterMixin","DOM","DOMDimensions","Input","Keys","MercuryTypeaheadTemplates","Tokenizer","Typeahead","TypeaheadCore","copyProperties","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s=function(t,u){this._domElement=null;this._typeahead=null;this._tokenizer=null;this._placeholder='';this._exclusions=[];this._viewNodeOrID=null;this._viewOptions={renderer:'compact',autoSelect:true};this._tokenizerBehaviors=[];this._heightPrev=null;this._dataSource=t;this._view=u;};q(s.prototype,h);q(s.prototype,{setPlaceholder:function(t){this._placeholder=t;return this;},setExcludedParticipantsFromThreadMeta:function(t){if(!t)return;if(!t.former_participants){this.setExcludedParticipants(t.participants);return;}var u=t.former_participants.filter(function(v){return v.is_friend===false;}).map(function(v){return v.id;});this.setExcludedParticipants(u.concat(t.participants));},setExcludedParticipants:function(t){this._exclusions=[];t.forEach(function(u){var v=u.indexOf(':');if(u.substr(0,v)=='fbid')this._exclusions.push(u.substr(v+1));}.bind(this));return this;},setViewNodeID:function(t){this._viewNodeOrID=t;},setViewNode:function(t){this._viewNodeOrID=t;},setFullWidthView:function(t){var u=i.create('div',{className:"_4ck uiTypeaheadView"});i.setContent(t,u);this.setViewNode(u);},setViewOption:function(t,u){this._viewOptions[t]=u;},addTokenizerBehavior:function(t){this._tokenizerBehaviors.push(t);},build:function(t){if(this._domElement)return;var u=m[':fb:mercury:tokenizer'].build(),v=m[':fb:mercury:typeahead'].build();this._domElement=u.getRoot();i.appendContent(this._domElement,v.getRoot());var w=v.getNode('textfield');k.setPlaceholder(w,this._placeholder);w.setAttribute('data-placeholder',this._placeholder);this._input=w;var x={node_id:this._viewNodeOrID,ctor:this._view,options:this._viewOptions},y={ctor:p,options:{setValueOnSelect:true}};this._typeahead=new o(this._dataSource,x,y,v.getRoot());this._typeahead.init();var z={inline:true,behaviors:this._tokenizerBehaviors};this._tokenizer=new n(this._domElement,this._typeahead);this._tokenizer.init(u.getNode('tokenarea'),'participants',[],z);this._tokenizer.subscribe(['addToken','removeToken','removeAllTokens'],this._tokensChanged.bind(this));this._tokenizer.subscribe('resize',function(){this.inform('resize');}.bind(this));g.listen(w,'focus',function(){this._resetDataSource();this._typeahead.init();}.bind(this));g.listen(this._domElement,'click',this.focus.bind(this));g.listen(w,'keydown',this.keydown.bind(this));this._heightPrev=j.getElementDimensions(this._domElement).height;},getElement:function(){return this._domElement;},getSelectedParticipantIDs:function(){var t=[];if(this._tokenizer)(this._tokenizer.getTokenValues()||[]).forEach(function(u){t.push('fbid:'+u);});return t;},getTokens:function(){var t=[];if(this._tokenizer)t=this._tokenizer.getTokens();return t;},getTokenizer:function(){return this._tokenizer;},keydown:function(event){if(this._tokenizer.inline&&event.keyCode==l.ESC){if(k.isEmpty(this._input)){var t=this._tokenizer.getLastToken();if(t&&t.isRemovable())this._tokenizer.removeToken(t);}else this._typeahead.getCore().reset();return false;}if(k.isEmpty(this._input)&&this._tokenizer.inline&&event.keyCode===l.RETURN){event.preventDefault();return this.inform('tokens-return');}},reset:function(){this._tokenizer&&this._tokenizer.removeAllTokens();this._typeahead&&this._typeahead.getCore().reset();},focus:function(){this._tokenizer&&this._tokenizer.focusInput();},getTypeahead:function(){return this._typeahead;},_resetDataSource:function(){this._dataSource.setExclusions(this._exclusions);},_tokensChanged:function(){this.inform('tokens-changed');}});e.exports=s;},null);
__d("MercurySeenByAll",["CSS","DataStore","MercuryDelayedRoger","DOM","MercuryIDs","MercuryViewer","MercuryThreads"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=b('MercuryThreads').get(),n={},o={updateOnSeenChange:function(q,r,s){n[q.tagName]=true;h.set(q,'thread-id',r.thread_id);g.addClass(q,'seenByListener');p(q,r,s);}};function p(q,r,s){var t=null;if(s){t=k.getParticipantIDFromUserID(s);}else t=l.getID();var u=r.participants.filter(function(w){return w!==t;}),v=r.participants.length>0&&r.participants[0]===t;g.conditionClass(q,'repliedLast',v);g.conditionClass(q,'seenByAll',v&&i.getSeenBy(r.thread_id).length===u.length);}i.subscribe('state-changed',function(q,r){for(var s in n){var t=j.scry(document.body,s+'.seenByListener');for(var u=0;u<t.length;u++){var v=t[u],w=h.get(v,'thread-id');if(r[w])m.getThreadMeta(w,function(x){p(v,x);});}}});e.exports=o;},null);
__d("StickerActions",["BanzaiLogger","StickerConstants","StickersDispatcher"],function(a,b,c,d,e,f,g,h,i){'use strict';var j={addPack:function(k){i.handleUpdateFromViewActions({actions:[{actionType:h.ActionTypes.ADD_PACK,packID:k}]});},removePack:function(k){i.handleUpdateFromViewActions({actions:[{actionType:h.ActionTypes.REMOVE_PACK,packID:k}]});},selectPack:function(k,l){if(!l)g.log('StickersLoggerConfig',{event:'select_pack',packid:k});i.handleUpdateFromViewActions({actions:[{actionType:h.ActionTypes.SELECT_PACK,packID:k}]});},resetNumNewPacks:function(){i.handleUpdateFromViewActions({actions:[{actionType:h.ActionTypes.RESET_NUM_NEW_PACKS}]});}};e.exports=j;},null);
__d("StickerState",["ImmutableObject","StickerConfig","PresenceState","StickerConstants","StickerImages","StickersDispatcher","StickerServerRequests","mixInEventEmitter"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';var o={},p,q,r,s=null,t=0,u={},v=[],w=[],x=[],y=null,z=i.get();if(z)y=z.tray_pack_id;var aa=h.ShowStickerReplyNUX,ba=h.ShowStickerSearchNUXIndicator,ca=h.ShowStickerSearchNUXTooltip,da={onTrayDataReady:function(ga){if(!q)q=m.fetchTrayData(function(ha){v=ha.packs.map(function(ia){return ea(ia);});r=ha.mru;t=ha.num_new_packs;x=ha.tags;});q.then(ga);},onStoreDataReady:function(ga){if(!p)p=m.fetchStoreData(function(ha){w=ha.packs.map(function(ia){return ea(ia);});});p.then(ga);},onPackDataReady:function(ga,ha){if(!o[ga])o[ga]=m.fetchPackData(ga,function(ia){ea(ia);});o[ga].then(ha);},getPacksInTray:function(){return v;},getPacksInCommentsTray:function(){var ga=[],ha=[],ia;for(var ja=0;ja<v.length;ja++)if(v[ja].isSearch){continue;}else if(v[ja].id==j.EMOTICON_PACK_ID){ia=v[ja];}else if(v[ja].isMessengerOnly){ha.push(v[ja]);}else ga.push(v[ja]);var ka=ga.concat(ha);if(ia)ka.push(ia);return ka;},getPackIDsInTray:function(){return v.map(function(ga){return ga.id;});},getPacksInStore:function(){return w;},getPack:function(ga){return u[ga];},getNumNewPacks:function(){return t;},getFeaturedTags:function(){return x;},resetNumNewPacks:function(){if(t){t=0;this.emit(this.NUM_NEW_PACKS_CHANGED,0);}},addMRUPack:function(){if(r){this._addPackToTray(r);r=null;}},addPack:function(ga){var ha=false;if(u[ga])ha=u[ga].isPromoted;m.addPack(ga,ha,function(ia){this._addPackToTray(ia);}.bind(this));},removePack:function(ga){m.removePack(ga,function(ha){v=v.filter(function(ia){return ia.id!==ha;});u[ha]=g.set(u[ha],{isInTray:false});w=w.map(function(ia){return u[ia.id];});this.emit(this.PACKS_CHANGED,ha);}.bind(this));},setTrayPackID:function(ga){y=ga;i.doSync();this.emit(da.PACK_SELECTED,ga);},getTrayPackID:function(){return y;},shouldShowStickerReplyNUX:function(){return aa;},clearShowStickerReplyNUX:function(){aa=false;},shouldShowStickerSearchNUXIndicator:function(){return ba;},shouldShowStickerSearchNUXTooltip:function(){return ca;},clearShowStickerSearchNUXIndicator:function(){m.markSeenSearchNUX();ba=false;},_addPackToTray:function(ga,ha){ea(ga);u[ga.id]=g.set(u[ga.id],{isPurchased:!ha,isInTray:true});var ia=v.filter(function(ka){return ka.id===ga.id;}).length>0;if(!ia){var ja;if(!ha){ja=v.filter(function(ka){return ka.isMRU||ka.isSearch;}).length;}else ja=v.filter(function(ka){return ka.id!==j.EMOTICON_PACK_ID;}).length;v.splice(ja,0,u[ga.id]);}w=w.map(function(ka){return u[ka.id];});this.emit(this.PACKS_CHANGED,ga.id);},_addRecentlyUsedSticker:function(ga){for(var ha=0;ha<s.length;++ha)if(s[ha].id===ga.id){s.splice(ha,1);break;}s.unshift(ga);},getMRUStickerPack:function(ga){if(!s)s=ga;return s;},updateRecentlyUsed:function(ga){if(!s){this.addMRUPack();return;}this._addRecentlyUsedSticker(k.getSticker(ga));},promotePackSentFromSearch:function(ga){m.promotePackSentFromSearch(ga,function(ha){return ha&&this._addPackToTray(ha,true);}.bind(this));}};l.register(function(ga){if(ga.actions&&ga.actions.length){var ha=j.ActionTypes;ga.actions.forEach(function(ia){switch(ia.actionType){case ha.ADD_PACK:da.addPack(ia.packID);break;case ha.REMOVE_PACK:da.removePack(ia.packID);break;case ha.SELECT_PACK:da.setTrayPackID(ia.packID);break;case ha.RESET_NUM_NEW_PACKS:da.resetNumNewPacks();break;}});}});da.PACKS_CHANGED='StickerState/packsChanged';da.PACK_SELECTED='StickerState/packSelected';da.NUM_NEW_PACKS_CHANGED='StickerState/numNewPacksChanged';i.registerStateStorer(function(ga){ga.tray_pack_id=y;});function ea(ga){var ha=ga.id;if(!u[ha]){return (u[ha]=new g(ga));}else return (u[ha]=g.set(u[ha],ga));}var fa={};fa[da.PACK_SELECTED]=true;fa[da.PACKS_CHANGED]=true;fa[da.NUM_NEW_PACKS_CHANGED]=true;n(da,fa);e.exports=da;},null);
__d("StickerStoreController",["Bootloader","DialogFitHeight","DOM","LayerAutoFocus","LayerFadeOnHide","LayerHideOnEscape","React","XUIDialog.react","XUIDialogBody.react","XUISpinner.react","cx","requestAnimationFrame"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){'use strict';var s=688,t=null,u=m.createClass({displayName:"StoreLayer",getInitialState:function(){return {renderStore:function(){return (m.createElement("div",{className:"_5r5e"},m.createElement(p,{background:"light",size:"large"})));}};},componentDidMount:function(){g.loadModules(["StickerStore.react"],function(x){this.setState({renderStore:function(){return (m.createElement(x,{currentPackID:this.props.packID,onPackSelect:this._packSelected,shown:this.props.shown}));}.bind(this)});}.bind(this));},_packSelected:function(x){this.setProps({packID:x});},_onToggle:function(x){r(this.setProps.bind(this,{shown:x},null));},render:function(){return (m.createElement(n,{behaviors:{DialogFitHeight:h,LayerAutoFocus:j,LayerFadeOnHide:k,LayerHideOnEscape:l},onToggle:this._onToggle,shown:this.props.shown,width:s},m.createElement(o,{className:"_5rq- autofocus"},this.state.renderStore())));}});function v(x){var y=i.create('div');i.appendContent(document.body,y);t=m.render(m.createElement(u,{packID:x,shown:true}),y);}var w={showStore:function(x){if(!t){v(x);}else t.setProps({shown:true,packID:x});}};e.exports=w;},null);
__d("StickerUtils",[],function(a,b,c,d,e,f){var g=64,h={getScaledDimensions:function(i,j){var k,l,m;if(j>i){m=g/j;k=i*m;l=j*m;}else{m=g/i;k=i*m;l=j*m;}return {height:Math.round(k),width:Math.round(l)};},capitalizeWords:function(i){var j=i.split(" ");for(var k=0;k<j.length;k++){var l=j[k].charAt(0).toUpperCase();j[k]=l+j[k].substr(1);}return j.join(" ");}};e.exports=h;},null);
__d("StickersFlyoutPackSelector.react",["Animation","ImmutableObject","Locale","React","Image.react","StickerActions","StickerConfig","StickerConstants","StickerState","StickerStoreController","XUIBadge.react","cx","emptyFunction","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){'use strict';var v=4,w=200,x="\u0e2a\u0e15\u0e34\u0e01\u0e40\u0e01\u0e2d\u0e23\u0e4c\u0e2a\u0e42\u0e15\u0e23\u0e4c",y=j.createClass({displayName:"StickersFlyoutPackSelector",propTypes:{isComments:j.PropTypes.bool,numNewPacks:j.PropTypes.number,packs:j.PropTypes.arrayOf(j.PropTypes.instanceOf(h)).isRequired,onPackClick:j.PropTypes.func,selectedPackID:j.PropTypes.string,resetTagSelectorFunc:j.PropTypes.func},getInitialState:function(){return {animating:false,page:0};},getDefaultProps:function(){return {isComments:false,numNewPacks:0};},shouldComponentUpdate:function(aa,ba){return !ba.animating;},onFlyoutShown:function(){if(this.props.packs.length>0){var aa=this._calculatePageForPack(this.props.selectedPackID);if(this.state.page!==aa)this._setPage(aa,0);}},_calculatePageForPack:function(aa){for(var ba=0;ba<this.props.packs.length;ba++)if(this.props.packs[ba].id==aa)return ba<=v?0:Math.floor((ba-1)/v);return 0;},_setPage:function(aa,ba){if(this.state.animating)return;this.setState({animating:true,page:aa},function(){var ca=this.refs.positioner.getDOMNode(),da=this._calculatePosition(aa);new g(ca).to(da.reference,da.offset+'px').ondone(function(){return this.setState({animating:false});}.bind(this)).duration(ba).go();});},_calculatePosition:function(aa){var ba=this.refs.positioner.getDOMNode(),ca=ba.childNodes[aa].offsetLeft;if(i.isRTL()){var da=ba.offsetWidth,ea=ba.childNodes[aa].offsetWidth;return {reference:'right',offset:ca+ea-da};}return {reference:'left',offset:-ca};},_numPages:function(){return Math.max(1,Math.ceil((this.props.packs.length-1)/v));},_canGoPrev:function(){return this.state.page>0;},_canGoNext:function(){return this.state.page+1<this._numPages();},_goPrev:function(){this._canGoPrev()&&this._setPage(this.state.page-1,w);},_goNext:function(){this._canGoNext()&&this._setPage(this.state.page+1,w);},_openStore:function(){l.resetNumNewPacks();p.showStore();},render:function(){return (j.createElement("div",{className:"_5r85"},this._renderStoreButton(),this._renderPrevArrow(),this._renderNextArrow(),j.createElement("div",{className:"_5r88"},j.createElement("div",{className:"_5r89",ref:"positioner"},this._renderPages()))));},_selectPack:function(aa){var ba=o.getPack(aa);if(ba&&ba.isPromoted)l.addPack(aa);if(aa===n.SEARCH_PACK_ID)this.props.resetTagSelectorFunc();if(this.props.onPackClick){this.props.onPackClick(aa);}else l.selectPack(aa);},_renderPages:function(){var aa=this.props.packs.map(function(ea,fa){return j.createElement(z,{key:ea.id,onClick:function(){return this._selectPack(ea.id);}.bind(this),pack:ea,selected:this.props.selectedPackID===ea.id,index:fa,isComments:this.props.isComments});}.bind(this)),ba=[];for(var ca=0;ca<aa.length;ca+=v){var da=ca;ca===0&&ca++;ba.push(j.createElement("div",{className:"_5r81",key:ca},aa.slice(da,ca+v)));}return ba;},_renderStoreButton:function(){return (j.createElement("a",{"aria-label":x,className:"_5r86 rfloat","data-hover":"tooltip",onClick:this._openStore},j.createElement(k,{className:"_5r87",src:u('/images/messaging/stickers/selector/sticker_store.png')}),this._renderJewel()));},_renderJewel:function(){var aa=this.props.numNewPacks;if(!aa)return null;return (j.createElement(q,{className:"rfloat _3fhs",count:aa,maxcount:9,type:"special"}));},_renderPrevArrow:function(){if(!this._canGoPrev())return null;var aa=i.isRTL()?u('/images/messaging/stickers/selector/right.png'):u('/images/messaging/stickers/selector/left.png');return (j.createElement("a",{className:(("_37wu")+(' '+"lfloat")),onClick:this._goPrev},j.createElement(k,{className:"_5r84",src:aa})));},_renderNextArrow:function(){if(!this._canGoNext())return null;var aa=i.isRTL()?u('/images/messaging/stickers/selector/left.png'):u('/images/messaging/stickers/selector/right.png');return (j.createElement("a",{className:(("_37wv")+(' '+"rfloat")),onClick:this._goNext},j.createElement(k,{className:"_5r84",src:aa})));}}),z=j.createClass({displayName:"PackIcon",propTypes:{index:j.PropTypes.number,isComments:j.PropTypes.bool,onClick:j.PropTypes.func,pack:j.PropTypes.instanceOf(h).isRequired,selected:j.PropTypes.bool},getDefaultProps:function(){return {isComments:false,onClick:s};},_getPackIcon:function(aa){if(aa.id==n.SEARCH_PACK_ID)return u('/images/messaging/stickers/icons/search.png');if(aa.id==n.MRU_STICKER_PACK)return u('/images/messaging/stickers/icons/recent.png');if(aa.id==n.EMOTICON_PACK_ID)return u('/images/messaging/stickers/icons/emoji.png');return aa.icon;},render:function(){var aa=this.props.pack,ba=m.WebStickerSearch&&!m.StickerSearchInRecent?this.props.index===1||this.props.index===2:this.props.index===1,ca=(("_5r8a")+(this.props.selected?' '+"_5r8b":'')+(aa.id==n.MRU_STICKER_PACK?' '+"_5qcj":'')+(aa.id==n.SEARCH_PACK_ID?' '+"_5qck":'')+(ba?' '+"_eb3":'')),da=this.props.isComments&&aa.isMessengerOnly,ea="\u0e0a\u0e38\u0e14\u0e19\u0e35\u0e49\u0e43\u0e0a\u0e49\u0e44\u0e14\u0e49\u0e40\u0e09\u0e1e\u0e32\u0e30\u0e01\u0e32\u0e23\u0e2a\u0e48\u0e07\u0e02\u0e49\u0e2d\u0e04\u0e27\u0e32\u0e21\u0e40\u0e17\u0e48\u0e32\u0e19\u0e31\u0e49\u0e19",fa=da?s:function(){return this.props.onClick(aa.id);}.bind(this);return (j.createElement("a",{"aria-label":da?ea:aa.name,className:ca,"data-id":aa.id,"data-hover":"tooltip",ref:"search_icon",onClick:fa,tabIndex:"0"},j.createElement(k,{className:((da?"_2ji6":'')+(' '+"_5r8c")+(m.WebStickerSearch?' '+"_1viy":'')),src:this._getPackIcon(aa)})));}});e.exports=y;},null);
__d("StickersFlyoutStickerSelector.react",["BanzaiLogger","Grid.react","Image.react","ScrollableArea.react","React","Sticker.react","StickerConstants","StickerConfig","StickerImages","StickerSearch","StickerState","StickerUtils","XUISpinner.react","areEqual","cx","debounce","emptyFunction","fbt","ix","throttle"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){'use strict';var aa=h.GridItem,ba=320,ca=278,da=m.MRU_STICKER_PACK,ea=64,fa=44,ga=112,ha=n.AutoAnimateStickerTray?'load_and_hover':'hover',ia=v(function(ka,la){if(!ka)return;g.log('StickersLoggerConfig',{event:'search_sticker',searchtoken:ka,numsearchresults:la.length});},1000),ja=k.createClass({displayName:"StickersFlyoutStickerSelector",propTypes:{height:k.PropTypes.number,onScroll:k.PropTypes.func,packID:k.PropTypes.string,userInput:k.PropTypes.string,typeaheadTags:k.PropTypes.array,singleWordTags:k.PropTypes.array,onQueryResultsFound:k.PropTypes.func},getDefaultProps:function(){return {isComments:false,onScroll:w,shown:false};},getInitialState:function(){return {loading:false,stickers:[]};},componentDidMount:function(){if(this.props.packID){this.requestStickersForPack(this.props.packID);return;}if((this.props.typeaheadTags&&this.props.typeaheadTags.length>0)||(this.props.singleWordTags&&this.props.singleWordTags.length>0)){this.requestStickersForTags(this.props.typeaheadTags,this.props.singleWordTags,this.props.userInput);return;}if(this.props.userInput)this.requestStickersForQuery(this.props.userInput);},componentWillReceiveProps:function(ka){if(ka.packID&&ka.packID!==this.props.packID){this.requestStickersForPack(ka.packID);}else if(!t(ka.typeaheadTags,this.props.typeaheadTags)||!t(ka.singleWordTags,this.props.singleWordTags)){this.requestStickersForTags(ka.typeaheadTags,ka.singleWordTags,ka.userInput);}else if(!p.getTags()&&ka.userInput!==this.props.userInput)this.requestStickersForQuery(ka.userInput);},requestStickersForTags:function(ka,la,ma){this.setState({loading:true});p.requestStickersForTags(ka,la,ma,function(na){if(!this.props.tagChosen)ia(ma,na);if(this.props.isComments)na=na.filter(function(oa){return !oa.isMessengerOnly;});this.isMounted()&&this.setState({loading:false,stickers:na.slice(0,40)});}.bind(this));},requestStickersForQuery:function(ka){this.setState({loading:true});p.requestStickersForQuery(ka,function(la){la.map(function(ma){return o.cacheSticker(ma);});if(!this.props.tagChosen)ia(ka,la);if(this.props.isComments)la=la.filter(function(ma){return !ma.isMessengerOnly;});if(this.isMounted()){this.setState({loading:false,stickers:la});if(n.EnterToSendSticker)this.props.onQueryResultsFound&&this.props.onQueryResultsFound(la);}}.bind(this));},requestStickersForPack:function(ka){this.setState({loading:true});o.requestStickersForPack(ka,ea,function(la){if(ka==da){la=q.getMRUStickerPack(la);if(this.props.isComments)la=la.filter(function(ma){return !ma.isMessengerOnly;});}this.setState({loading:false,stickers:la});}.bind(this));},renderStickers:function(){return this.state.stickers.map(function(ka){var la=r.getScaledDimensions(ka.height,ka.width);return (k.createElement(aa,{key:ka.id},k.createElement("div",{className:"_5r8h","data-id":ka.id},k.createElement(l,{animationTrigger:ha,className:"_5r8i",frameCount:ka.frameCount,frameRate:ka.frameRate||83,framesPerCol:ka.framesPerCol,framesPerRow:ka.framesPerRow,shown:this.props.shown,sourceHeight:la.height,sourceURI:ka.sourceURI,sourceWidth:la.width,spriteURI:ka.spriteURI,paddedSpriteURI:ka.paddedSpriteURI,stickerID:ka.id,style:{cursor:'pointer'}}))));}.bind(this));},_onScroll:function(){var ka=this.refs.stickerScrollable;if(ka){var la=ka.getArea().getScrollTop();this.props.onScroll(la);}},render:function(){if(this.state.loading){return (k.createElement("div",{className:"_e0r"},k.createElement(s,{size:"large"})));}else if(this.state.stickers.length===0){var ka=(ba-fa*2-ga)/2+"px";return (k.createElement("div",{className:"_5jdt",style:{marginTop:ka}},k.createElement(i,{src:y("/images/messaging/stickers/icons/sad_face.png")}),k.createElement("p",null,"\u0e44\u0e21\u0e48\u0e21\u0e35\u0e2a\u0e15\u0e34\u0e01\u0e40\u0e01\u0e2d\u0e23\u0e4c\u0e43\u0e2b\u0e49\u0e41\u0e2a\u0e14\u0e07")));}return (k.createElement(j,{ref:"stickerScrollable",height:this.props.height||ba,onScroll:z(this._onScroll,200),width:ca,fade:true},k.createElement("div",{className:"_5r8k"},k.createElement(h,{cols:4,fixed:true},this.renderStickers()))));}});e.exports=ja;},null);
__d("StickersFlyoutTagSelector.react",["BanzaiLogger","Grid.react","ScrollableArea.react","Parent","React","Image.react","StickerConfig","StickerConstants","StickersFlyoutStickerSelector.react","StickerSearch","StickerState","StickerUtils","Toggler","XUIButton.react","XUICloseButton.react","XUITextInput.react","cx","emptyFunction","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){'use strict';var z=h.GridItem,aa=320,ba=278,ca=44,da=k.createClass({displayName:"StickersFlyoutTagSelector",propTypes:{trigger:k.PropTypes.string,isComments:k.PropTypes.bool,resetTrigger:k.PropTypes.func,shown:k.PropTypes.bool,onSelectSticker:k.PropTypes.func},getInitialState:function(){return {input:'',isScrolling:false,tagChosen:false,typeaheadTags:[],singleWordTags:[],matchedStickers:[]};},getDefaultProps:function(){return {trigger:null,isComments:false,resetTrigger:x,shown:false,onSelectSticker:x};},componentDidMount:function(){var ea=j.byClass(this.getDOMNode(),'uiToggle');if(ea)this._togglerSub=s.listen('show',ea,function(){this.isMounted()&&this.focusInput();}.bind(this));this.focusInput();this.selectTrigger(this.props.trigger);},componentWillUnmount:function(){this._togglerSub&&this._togglerSub.unsubscribe();},componentWillReceiveProps:function(ea){this.selectTrigger(ea.trigger);},focusInput:function(){this.refs.inputField.focusInput&&this.refs.inputField.focusInput();},_setMatchedStickers:function(ea){this.setState({matchedStickers:ea?ea:[]});},_onEnter:function(ea){ea.preventDefault();ea.stopPropagation();if(!m.EnterToSendSticker)return;var fa=this.state.matchedStickers;if(fa&&fa.length===1){this.props.onSelectSticker(fa[0].id,ea);this.setState({matchedStickers:[]});}},_inputChanged:function(ea){var fa=this._normalizeInput(ea.target.value),ga=p.getTags();if(ga){var ha=ga.filter(function(ka){return ka.name.indexOf(fa)===0;}),ia=fa.split(/\s+/),ja=ia.map(function(ka){return p.getTagByName(ka);}).filter(function(ka){return ka!==(void 0);});if(ja.length!==ia.length)ja=[];this.setState({input:ea.target.value,tagChosen:false,typeaheadTags:ha,singleWordTags:ja,isScrolling:false});}else this.setState({input:ea.target.value,tagChosen:false,isScrolling:false});},_normalizeInput:function(ea){return ea.trim().replace(/\s+/,' ').toLowerCase();},_handleResetButtonClick:function(ea){ea.preventDefault();this.reset();},reset:function(){this.setState(this.getInitialState());},renderContentArea:function(){if(this.state.tagChosen||this._normalizeInput(this.state.input).length>1){return this.renderStickers();}else return m.StickerSearchInRecent?this.renderRecentStickers():this.renderTags();},render:function(){return (k.createElement("div",{className:(("_217a")+(this.state.isScrolling?' '+"_1hg1":''))},k.createElement("div",{className:"_5jdr"},k.createElement("span",{className:"_5jds"}),k.createElement(v,{onEnter:this._onEnter,onChange:this._inputChanged,ref:"inputField",placeholder:"\u0e04\u0e49\u0e19\u0e2b\u0e32\u0e2a\u0e15\u0e34\u0e01\u0e40\u0e01\u0e2d\u0e23\u0e4c",value:this.state.input}),k.createElement(u,{size:"small",onClick:this._handleResetButtonClick,className:((this.state.input.length===0?"hidden_elem":''))})),this.renderContentArea()));},selectTag:function(ea){g.log('StickersLoggerConfig',{event:'select_tag',tagid:ea.id});this.setState({tagChosen:true,typeaheadTags:[ea],singleWordTags:[],input:r.capitalizeWords(ea.name)});this.focusInput();},selectTrigger:function(ea){if(ea!==null){var fa=p.getTagByName(ea);this.setState({tagChosen:true,typeaheadTags:[fa],singleWordTags:[],input:r.capitalizeWords(fa.name)});this.props.resetTrigger();}},_onScroll:function(ea){this.setState({isScrolling:!!ea});},renderStickers:function(){var ea=this._normalizeInput(this.state.input);return (k.createElement(o,{ref:"selector",height:aa-ca,userInput:ea,typeaheadTags:this.state.typeaheadTags,singleWordTags:this.state.singleWordTags,onScroll:this._onScroll,isComments:this.props.isComments,tagChosen:this.state.tagChosen,shown:this.props.shown,onQueryResultsFound:this._setMatchedStickers}));},renderRecentStickers:function(){if(this._normalizeInput(this.state.input).length===1)return k.createElement("div",null);return (k.createElement(o,{ref:"selector",height:aa-ca,packID:n.MRU_STICKER_PACK,onScroll:this._onScroll,isComments:this.props.isComments,shown:this.props.shown}));},renderTags:function(){var ea=q.getFeaturedTags().filter(function(fa){return fa.sourceURI!==null;}).sort(function(fa,ga){return fa.order-ga.order;}).map(function(fa,ga){return k.createElement(z,{key:ga},k.createElement("div",{className:(("_t5c")+(ga<2?' '+"_1b27":'')+(ga%2===0?' '+"_t5d":'')+(ga%2!==0?' '+"_t5e":''))},k.createElement(t,{image:k.createElement(l,{src:fa.sourceURI}),label:fa.name,onClick:this.selectTag.bind(this,fa),className:"_5jdu",style:{background:'#'+fa.color_code},disabled:this._normalizeInput(this.state.input).length===1})));}.bind(this));return (k.createElement(i,{height:aa-ca,width:ba-16,shadow:true,fade:true,className:"_5jei"},k.createElement(h,{spacing:"pas",cols:2,fixed:true,ref:"grid"},ea)));}});e.exports=da;},null);