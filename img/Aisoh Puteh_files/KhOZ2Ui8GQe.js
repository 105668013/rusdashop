/*!CK:627304725!*//*1416196068,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["xqcu0"]); }

__d("TagExpansionButtonConfig",[],function(a,b,c,d,e,f){e.exports={FRIENDS_OF_TAGGED:"friends_of_tagged",TAGGED_ONLY:"tagged_only"};},null);
__d("XPubcontentInlinePhotoPivotsEventsControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f){e.exports=b("XControllerURIBuilder").create("\/pubcontent\/inline_photo_pivots_chaining\/events\/",{});},null);
__d("EntstreamAttachmentRelatedShare",["Arbiter","AsyncRequest","AttachmentRelatedShareConstants","csx","cx","CSS","DOM","Event","ge","tidyEvent","XPubcontentInlinePhotoPivotsEventsControllerURIBuilder"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=2,s=3,t={createRelatedAttachmentDelay:function(u,v,w){var x=null;if(typeof u==="string"){x=o(u);}else x=u;if(!x)return;setTimeout(function(){g.inform(i.ARTICLE_CLICK,{attachment:x,global_share_id:v,is_auto_expand:true,is_right_click:false});},1000);},loadRelatedAttachment:function(u,v,w){var x=null;if(typeof u==="string"){x=o(u);}else x=u;if(!x)return;var y=n.listen(x,'click',function(){y.remove();g.inform(i.ARTICLE_CLICK,{attachment:x,global_share_id:v,is_right_click:false,share_id:w});}),z=n.listen(x,'mousedown',function(event){if(event.which===s||event.button===r){z.remove();g.inform(i.ARTICLE_CLICK,{attachment:x,global_share_id:v,is_right_click:true});}});},loadInlineStoryPivotAttachment:function(u,v){var w=o(u);if(!w)return;var x=n.listen(w,'click',function(){x.remove();g.inform(i.PHOTO_CLICK,{attachment:w,storyid:v});});},loadRelatedGameAttachment:function(u,v){var w=null;if(typeof u==="string"){w=o(u);}else w=u;if(!w)return;p(n.listen(w,'click',function(){g.inform(i.GAME_CLICK,{attachment:w,global_share_id:v});}));p(n.listen(w,'mousedown',function(event){if(event.which===s||event.button===r)g.inform(i.GAME_CLICK,{attachment:w,global_share_id:v});}));},loadRelatedLSCVideoAttachment:function(u,v){var w=null;if(typeof u==='string'){w=o(u);}else w=u;if(!w)return;var x="^div._4-u2",y=m.scry(w,x),z=n.listen(w,'click',function(){z.remove();g.inform(i.VIDEO_CLICK,{attachment:w,global_share_id:v});});},loadRelatedLSCInlineVideoAttachment:function(u,v){var w=null;if(typeof u==='string'){w=o(u);}else w=u;if(!w)return;n.listen(w,'click',function(){var x="^div._4-u2",y="_1d8v",z=m.scry(w,x),aa=z.length===1?z[0]:null,ba=aa.parentNode,ca=ba.previousSibling;while(!ca){ba=ba.parentNode;ca=ba.previousSibling;}if(!l.hasClass(ca,y)){var da=m.create('div',{className:y}),ea=m.insertBefore(aa.parentNode,da),fa=ea.length>=1?ea[0]:null;}else fa=ca;var ga=m.getID(fa);new h().setURI('/ajax/flash/expand_inline.php').setData({share_id:v,target_div:ga,max_width:470,max_height:264,replace_target_div:true,expand_you_tube_video:true}).setMethod('GET').setReadOnly(true).setRelativeTo(w.parentNode).send();});},closeButton:function(u,v){n.listen(u,'click',function(){m.remove(v);});},closeButtonPhotoPivots:function(u,v,w,x){n.listen(u,'click',function(){var y=new q(),z={story_id:w,search_query_type:x,event:'hide'};new h().setMethod('POST').setURI(y.getURI()).setData(z).send();m.remove(v);});},seeAllLinkPhotoPivots:function(u,v,w){n.listen(u,'click',function(){var x=new q(),y={story_id:v,search_query_type:w,event:'see_all'};new h().setMethod('POST').setURI(x.getURI()).setData(y).send();});},loadRelatedVideos:function(u,v,w){var x=o(u);if(!x)return;var y=o(v);if(!y)return;var z={global_share_id:w,attachment_div_id:m.getID(x.parentNode),video_div_id:v},aa=n.listen(y,'click',function(){aa.remove();g.inform(i.VIDEO_CLICK,{attachment:x.parentNode,attachment_div_id:m.getID(x.parentNode),video_div_id:v,global_share_id:w});});},removeOldSuggestions:function(u){var v=o(u);if(!v)return;var w=m.scry(v.parentNode,"._5d73");for(var x=1;x<w.length;x++)m.remove(w[x]);setTimeout(function(){l.show(w[0]);},1000);},showHiddenSuggestions:function(u){var v=n.listen(u,'click',function(){v.remove();var w="^._1ui8",x=m.scry(u,w);if(!x)return;l.hide(x[0]);var y=x[0].previousSibling;while(y){l.show(y);y=y.previousSibling;}});}};e.exports=t;},null);
__d("MetaComposerEdDialog",["ARIA","Animation","Arbiter","AsyncRequest","DOM","Ease","Parent","SelectorDeprecated","Vector","copyProperties","getElementText"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=null;function s(t){this._dialog=t.dialog;this.config=t;this._init();}s.init=function(t){if(r){r.config.show_audience=t.show_audience;t.dialog.destroy();return;}r=new s(t);};p(s.prototype,{_init:function(){i.subscribe('ComposerXStatusAttachment/ready',function(){if(this.config.show_audience){this._sendEducationRequest({},'/ajax/composer/audience/education',this._handlerCustomDuration.bind(this,6000));this.config.show_audience=false;}}.bind(this));if(this.config.show_sticky)i.subscribe('composer/mutate',function(t,u){this._sendEducationRequest({sticky_num:this.config.n_sticky_shown},'/ajax/composer/audience/sticky_education');}.bind(this));if(this.config.show_tags)i.subscribe('SelectedPrivacyOption/changed',function(t,u){this._sendEducationRequest({ids:u.tags,from:'WithTagger',hasEvent:u.hasEvent,type:u.privacy,tag_num:this.config.n_tag_shown},'/ajax/composer/audience/tag_education',this._handler.bind(this));}.bind(this));n.subscribe('open',this._killAnim.bind(this));},_sendEducationRequest:function(t,u,v){if(!this._updateDialogContext())return;this._async&&this._async.abort();this._async=new j(u);this._async.setData(t).setHandler(v).send();},_updateDialogContext:function(){var t=k.scry(document.body,'div.composerAudienceWrapper'),u,v;for(var w=0;w<t.length;w++){u=t[w];v=o.getElementPosition(u);if(u&&v.x>0&&v.y>0){this._dialog.setContext(u);return true;}}return false;},_handler:function(t){this._handlerCustomDuration(1500,t);},_handlerCustomDuration:function(t,u){var v=u.payload;if(!v||!this._updateDialogContext())return;var w=this._dialog.getContent().firstChild;k.setContent(w,v);g.announce(q(w));this._dialog.show();var x=m.byClass(w,'metaComposerUserEd');if(this._anim){this._anim.stop();this._anim=new h(x);}else this._anim=new h(x).from('opacity',0);this._anim.to('opacity',1).ease(l.sineOut).checkpoint().duration(t).checkpoint().to('opacity',0).ease(l.sineOut).checkpoint().ondone(this._killAnim.bind(this)).go();},_killAnim:function(t,u){if(this._anim){this._dialog.hide();this._anim.stop();this._anim=null;}}});e.exports=s;},null);
__d("PrivacySelectorOptionNew",["CSS","DOM","DOMQuery","JSXDOM","MenuSelectableItem","PrivacyConst","csx","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){for(var p in k)if(k.hasOwnProperty(p))r[p]=k[p];var q=k===null?null:k.prototype;r.prototype=Object.create(q);r.prototype.constructor=r;r.__superConstructor__=k;function r(s){"use strict";k.call(this,s);this.updateAfterTagExpansion(this._data.hasTags);}r.prototype.getTooltip=function(){"use strict";return this._data.tooltip;};r.prototype.getPostParam=function(){"use strict";return this._data.postParam;};r.prototype.getTriggerIcon=function(){"use strict";return this._data.triggerIcon;};r.prototype.isPublic=function(){"use strict";return this.getPostParam()===l.PostParam.EVERYONE;};r.prototype.isFriends=function(){"use strict";return this.getPostParam()===l.PostParam.FRIENDS;};r.prototype.isOnlyMe=function(){"use strict";return this.getPostParam()===l.PostParam.ONLY_ME;};r.prototype.isBasicOption=function(){"use strict";return true;};r.prototype.isCustomOption=function(){"use strict";return false;};r.prototype.getTagExpansionBehavior=function(){"use strict";return this._data.tagExpansionBehavior;};r.prototype.getBaseValue=function(){"use strict";return this._data.baseValue;};r.prototype.getIndex=function(){"use strict";return this._data.value;};r.prototype.getLoggingEventName=function(){"use strict";switch(this.getPostParam()){case l.PostParam.FRIENDS:return 'click_friends';case l.PostParam.EVERYONE:return 'click_everyone';case l.PostParam.ONLY_ME:return 'click_only_me';case l.PostParam.FRIENDS_MINUS_ACQUAINTANCES:return 'click_friends_except_acquaintances';case l.PostParam.FB_ONLY:return 'click_fb_only';default:return 'click_other';}};r.prototype.updateAfterTagExpansion=function(s){"use strict";var t=this._data.baseLabel;if(s&&this._data.showPlusOnTagExpansion)t=o._("{privacyLabel} (+)",[o.param("privacyLabel",this._data.baseLabel)]);this._setLabel(t);if(s){this._setSubtitle(this._data.optionSubtitleWithTags);}else this._setSubtitle(this._data.optionSubtitle);};r.prototype.isBelowFold=function(){"use strict";var s=g.hasClass(this.getRoot(),"_3ey_");return s;};r.prototype._setLabel=function(s){"use strict";if(!s)return;var t=i.find(this.getRoot(),"._54nh");t&&h.setContent(t,s);this._data.label=s;};r.prototype._setSubtitle=function(s){"use strict";if(!s)return;var t=i.find(this.getRoot(),"._48u1");t&&h.setContent(t,s);};r.prototype.render=function(){"use strict";var s=q.render.call(this);if(!this._data.isPrimaryOption)return s;var t=i.find(s,"._54nc");t&&g.addClass(t,"_48t_");var u=h.find(s,"._54nh");u&&g.addClass(u,"_48u0");var v=j.div({className:"_48u1"},this._data.optionSubtitle);h.appendContent(t,v);return s;};e.exports=r;},null);
__d("XPrivacySelectorLoggingControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f){e.exports=b("XControllerURIBuilder").create("\/privacy\/selector\/log\/",{event:{type:"Enum",required:true},render_location:{type:"Int",required:true},content_type:{type:"String",required:true}});},null);
__d("PrivacySelectorCustomOption",["AsyncDialog","AsyncRequest","DataStore","PrivacySelectorOptionNew","XPrivacySelectorLoggingControllerURIBuilder","XPrivacyCustomDialogControllerURIBuilder"],function(a,b,c,d,e,f,g,h,i,j,k,l){for(var m in j)if(j.hasOwnProperty(m))o[m]=j[m];var n=j===null?null:j.prototype;o.prototype=Object.create(n);o.prototype.constructor=o;o.__superConstructor__=j;function o(p){"use strict";j.call(this,p);}o.prototype.isBasicOption=function(){"use strict";return false;};o.prototype.isCustomOption=function(){"use strict";return true;};o.prototype.getSelector=function(){"use strict";return this._selector;};o.prototype.setPostParam=function(p){"use strict";this._data.postParam=p;};o.prototype.getLoggingEventName=function(){"use strict";return 'click_custom';};o.prototype.openDialog=function(p){"use strict";if(typeof this._selector==='undefined')this._selector=p;i.set(this._data.id,'PrivacySelectorCustomOption',this);var q=new l().setString('option_id',this._data.id).setString('id',this._data.privacyfbid.toString()).setString('post_param',p.getPostParam()).setString('content_type',p.getContentType()).setInt('render_location',p.getRenderLocation()).setIntVector('tags',p.getTags()).setBool('autosave',this._data.autosave).setBool('limit_community',this._data.limitcommunity).setBool('limit_facebook',this._data.limitfacebook).setBool('limit_fof',this._data.limitfof).setBool('limit_tagexpand',this._data.limittagexpand).setBool('is_new_privacy_selector',true).setString('tag_expansion_button',p.getTagExpansionButton()).getURI(),r=new h(q);r.setRelativeTo(p.getTriggerButtonElement());g.send(r,function(s){var t=function(u){var v=new k().setEnum('event',u).setInt('render_location',document.getElementsByName('render_location')[0].value).setString('content_type',document.getElementsByName('content_type')[0].value).getURI();new h().setURI(v).send();};s.subscribe('hide',function(){p.inform('custom/hide');p.inform('selectorFinished');});s.subscribe('success',function(){p.inform('custom/success');t('custom_save');});s.subscribe('cancel',function(){p.inform('custom/cancel');t('custom_cancel');});});};o.customPrivacySave=function(p,q,r){"use strict";var s=i.get(p,'PrivacySelectorCustomOption');s.getSelector().updateDataForItemIndex(s.getIndex(),q,r);s.getSelector().setValue(s.getIndex());i.remove(p,'PrivacySelectorCustomOption');};e.exports=o;},null);
__d("PrivacySelectableMenu",["AsyncRequest","CSS","Ease","PrivacySelectorCustomOption","PrivacySelectorOptionNew","SelectableMenu","SelectableMenuUtils","XPrivacySelectorLoggingControllerURIBuilder","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){for(var p in l)if(l.hasOwnProperty(p))r[p]=l[p];var q=l===null?null:l.prototype;r.prototype=Object.create(q);r.prototype.constructor=r;r.__superConstructor__=l;function r(s,t){"use strict";l.call(this,s,t);}r.prototype.getItemForIndex=function(s){"use strict";for(var t=0;t<this._items.length;t++){var u=this._items[t];if(u instanceof k&&u.getIndex()==s)return u;}return null;};r.prototype.selectDefaultOption=function(){"use strict";this._items.some(function(s){if(s instanceof k&&this._isDefaultOption(s)){this.setValue(s.getIndex());return true;}return false;},this);};r.prototype.selectOption=function(s){"use strict";var t=null,u=this._items.some(function(v){if(v instanceof k&&!v.isCustomOption()&&v.getPostParam()==s){this.setValue(v.getIndex());return true;}if(v instanceof j){t=v;return false;}if(this._isMoreOption(v)){this.expandMenu();return false;}},this);if(!u&&t){t.setPostParam(s);this.setValue(t.getIndex());}};r.prototype._isDefaultOption=function(s){"use strict";return h.hasClass(s.getRoot(),"_plx");};r.prototype._isMoreOption=function(s){"use strict";return h.hasClass(s.getRoot(),"_po2");};r.prototype._handleItemClick=function(s,t){"use strict";if(!m.doesItemSupportSelect(s))return q._handleItemClick.call(this,s,t);if(this._isMoreOption(s)){this._logMoreClick();this.expandMenu();return;}this._logOptionClick(s);var u=this.inform('itemclick',{item:s,event:t});if(u)return;if(!m.isSelected(s)&&!s.isCustomOption()&&s.select()!==false){this._items.forEach(function(v){if(m.isSelected(v)&&v!==s)v.deselect();});this.inform('change',this.getSelection());}this.done();return s.handleClick();};r.prototype._logMoreClick=function(){"use strict";var s=new n().setEnum('event','more_options').setInt('render_location',this._config.renderlocation).setString('content_type',this._config.contenttype).getURI();new g().setURI(s).send();};r.prototype._logOptionClick=function(s){"use strict";var t=new n().setEnum('event',s.getLoggingEventName()).setInt('render_location',this._config.renderlocation).setString('content_type',this._config.contenttype).getURI();new g().setURI(t).send();};r.prototype.expandMenu=function(){"use strict";h.removeClass(this.getRoot(),"_po3");h.addClass(this.getRoot(),"_po4");this.inform('expandMenu');};r.prototype.collapseMenu=function(){"use strict";h.removeClass(this.getRoot(),"_po4");h.addClass(this.getRoot(),"_po3");};r.prototype.updateOptionsAfterTagExpansion=function(s){"use strict";this.forEachItem(function(t){if(t instanceof k)t.updateAfterTagExpansion(s);});};r.prototype.onPopoverOpen=function(s){"use strict";if(this._config.learnMore)this._config.learnMore.collapse();if(s.isBelowFold()){this.expandMenu();}else this.collapseMenu();if(this._items.indexOf(s)>=15)setTimeout(function(){this._scrollableArea.scrollToBottom(true,{duration:1000,ease:i.sineOut});}.bind(this),250);};e.exports=r;},null);
__d("MenuStaticItem",["DOM","MenuItemBase","React","copyProperties","cx","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l){for(var m in h)if(h.hasOwnProperty(m))o[m]=h[m];var n=h===null?null:h.prototype;o.prototype=Object.create(n);o.prototype.constructor=o;o.__superConstructor__=h;function o(p){"use strict";h.call(this);this._data=p;}o.prototype._renderItemContent=function(){"use strict";var p=g.create('span',{className:"_54nc _54ah"});if(this._data.children){i.render(i.createElement("span",{className:"_54nh"},this._data.children),p);}else g.setContent(p,g.create('span',{className:"_54nh"},this._data.markup));return p;};j(o.prototype,{handleClick:l});e.exports=o;},null);
__d("PopoverButton",["DOM","DOMQuery","csx"],function(a,b,c,d,e,f,g,h,i){var j={setLabel:function(k,l){var m=h.find(k,"._55pe"),n=m.childNodes;for(var o=0;o<n.length;o++)if(h.isTextNode(n[o])){g.replace(n[o],l);return;}g.appendContent(m,l);}};e.exports=j;},null);
__d("PrivacySelectorNewDispatcher",["Dispatcher","copyProperties","merge"],function(a,b,c,d,e,f,g,h,i){var j='selector',k=h(new g(),{handleUpdateFromSelector:function(l){this.dispatch(i({payloadSource:j},l));}});e.exports=k;},null);
__d("PrivacySelectorDataStore",["ArbiterMixin","merge","PrivacySelectorNewDispatcher","KeyedCallbackManager"],function(a,b,c,d,e,f,g,h,i,j){var k=new j(),l=h(g,{get:function(m,n){k.executeOrEnqueue(m,n);},hasValueChanged:function(m){return !!k.getResource(m);}});i.register(function(m){if(m.selector_type){var n={};n[m.selector_type]={post_param:m.post_param,unique_id:m.unique_id};k.addResourcesAndExecute(n);l.inform('change');}});e.exports=l;},null);
__d("XPrivacySelectorUpdateControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f){e.exports=b("XControllerURIBuilder").create("\/privacy\/selector\/update\/",{privacy_fbid:{type:"Int",required:true},post_param:{type:"String",required:true},tags:{type:"IntVector"},render_location:{type:"Int",required:true},is_saved_on_select:{type:"Bool"},should_return_tooltip:{type:"Bool"},replace_on_select:{type:"Bool"},prefix_tooltip_with_app_privacy:{type:"Bool"},ent_id:{type:"Int",required:true},tag_expansion_button:{type:"String"},reload_selector:{type:"Bool"}});},null);
__d("PrivacySelectorBase",["ArbiterMixin","AsyncRequest","Button","CSS","CurrentUser","Input","MenuStaticItem","MenuSelectableItem","PopoverButton","PopoverLoadingMenu","PrivacyConst","DataStore","PrivacySelectorNewDispatcher","PrivacySelectorDataStore","PrivacySelectableMenu","TagExpansionButtonConfig","Tooltip","XPrivacySelectorLoggingControllerURIBuilder","XPrivacySelectorUpdateControllerURIBuilder","bind","cx","fbt","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca){var da=3,ea=ca(g);for(var fa in ea)if(ea.hasOwnProperty(fa))ha[fa]=ea[fa];var ga=ea===null?null:ea.prototype;ha.prototype=Object.create(ga);ha.prototype.constructor=ha;ha.__superConstructor__=ea;function ha(ia,ja,ka,la,ma,na){"use strict";r.set(ia,'selector',this);this._root=ia;this._button=ja;this._config=na;this._menu=ka;this._popoverMenu=ma;this._input=la;this._isSavedOnSelect=na.is_saved_on_select;this._privacyFBID=na.privacy_fbid;this._contentType=na.content_type;this._renderLocation=na.render_location;this._supportsTagExpansion=na.supports_tag_expansion;this._prefixTooltipApps=na.should_prefix_tooltip_apps;this._shouldDisplayLabel=na.should_display_label;this._tags=na.tagged_uids;this._hasTags=this._tags.length>0;this._entID=na.ent_id;this._popover=this._popoverMenu.getPopover();this._receivingUpdate=false;this._initTagExpansionButtonState();if(na.use_async_menu){this._popoverMenu.subscribe('setMenu',function(){this._menu=this._popoverMenu.getMenu();if(!(this._menu instanceof u))return;this._onMenuLoad();this._onPopoverOpen();this.inform('asyncMenuLoaded');}.bind(this));}else this._onMenuLoad();if(na.selector_sync_key){this._selectorSyncKey=na.selector_sync_key.toString();t.subscribe('change',function(){t.get(this._selectorSyncKey,function(oa){if(oa.unique_id!==this._menu._config.id){this._receivingUpdate=true;this.selectOption(oa.post_param);this._isComposerWithDefault()&&this._reloadSelector();}}.bind(this));}.bind(this));if(!this._syncsToDefault())this._menu.subscribe('change',function(){this._broadcastUpdate();}.bind(this));}}ha.prototype._broadcastUpdate=function(){"use strict";if(!this._receivingUpdate){var ia=this._getSelectedOption();s.handleUpdateFromSelector({selector_type:this._selectorSyncKey,post_param:ia.getPostParam().toString(),unique_id:this._menu._config.id});}else this._receivingUpdate=false;};ha.prototype._isComposerWithDefault=function(){"use strict";return this._syncsToDefault()&&!this._config.replace_on_select;};ha.prototype._isSelectorForChangingComposerDefault=function(){"use strict";return this._syncsToDefault&&this._config.replace_on_select;};ha.prototype._syncsToDefault=function(){"use strict";return this._config.selector_sync_key==q.PrivacyField.DEFAULT_COMPOSER.toString();};ha.prototype.getIsPublicSelected=function(){"use strict";return this._selectedOption.isPublic();};ha.prototype.getIsFriendsSelected=function(){"use strict";return this._selectedOption.isFriends();};ha.prototype.getIsOnlyMeSelected=function(){"use strict";return this._selectedOption.isOnlyMe();};ha.prototype.getSelectedBaseValue=function(){"use strict";return this._selectedOption.getBaseValue();};ha.prototype.setValue=function(ia){"use strict";this._menu.setValue(ia);};ha.prototype.openSelectorExpanded=function(ia){"use strict";this.openSelector(function(){this._menu.expandMenu();ia&&ia();}.bind(this));};ha.prototype.openSelector=function(ia){"use strict";if(this._menu instanceof p){this.subscribeOnce('asyncMenuLoaded',function(){ia&&ia();}.bind(this));this._popover.showLayer();}else{this._popover.showLayer();ia&&ia();}};ha.prototype.closeSelector=function(){"use strict";this._popover.hideLayer();};ha.prototype.getPopover=function(){"use strict";return this._popover;};ha.prototype.getTriggerButtonElement=function(){"use strict";return this._button;};ha.prototype.getMenuElement=function(){"use strict";return this._menu.getRoot();};ha.prototype.selectDefaultOption=function(){"use strict";this._menu.selectDefaultOption();this._updateMenu();};ha.prototype.selectOption=function(ia){"use strict";if(!ia)return;if(this._menu instanceof p){this.subscribeOnce('asyncMenuLoaded',this._selectOptionImpl.bind(this,ia));this._fetchAsyncMenu();}else this._selectOptionImpl(ia);};ha.prototype._selectOptionImpl=function(ia){"use strict";this._menu.selectOption(ia);this._updateMenu();};ha.prototype._updateMenu=function(){"use strict";this._selectedOption=this._getSelectedOption();this.updateDataForItemIndex(this._selectedOption.getIndex(),this._selectedOption.getPostParam().toString());};ha.prototype.setTagExpansionButton=function(ia){"use strict";this._tagExpansionButton=ia;if(this._hasTags){this._menu.updateOptionsAfterTagExpansion(this._showTagExpansion());this._updateTriggerButtonLabel();this._updateTooltipAfterChange();}};ha.prototype.getTagExpansionButton=function(){"use strict";return this._tagExpansionButton;};ha.prototype._initTagExpansionButtonState=function(){"use strict";this._tagExpansionButton=v.FRIENDS_OF_TAGGED;var ia=this._getSelectedOption();if(!ia)return;var ja=JSON.parse(ia.getPostParam());if(ja.settings&&ja.settings.no_tag_expansion===true){this._tagExpansionButton=v.TAGGED_ONLY;}else this._tagExpansionButton=v.FRIENDS_OF_TAGGED;};ha.prototype._fetchAsyncMenu=function(){"use strict";if(this._config.use_async_menu)this._popoverMenu.fetchMenu();};ha.prototype._getSelectedOption=function(){"use strict";if(!(this._menu instanceof u))return;var ia;this._menu.forEachItem(function(ja){if(ja instanceof n&&ja.isSelected())ia=ja;}.bind(this));return ia;};ha.prototype._onItemClick=function(ia,ja){"use strict";var ka=ja.item;if(ka instanceof m)return;if(ka.isBasicOption()){this.updateDataForItemIndex(ka.getIndex(),ka.getPostParam().toString());}else if(ka.isCustomOption()){this._closeForCustom=true;ka.openDialog(this);}this.inform('click',{customSelected:ka.isCustomOption()});};ha.prototype.getContentType=function(){"use strict";return this._contentType;};ha.prototype.getRenderLocation=function(){"use strict";return this._renderLocation;};ha.prototype.getPostParam=function(){"use strict";return this._postParam;};ha.prototype.getTags=function(){"use strict";return this._tags;};ha.prototype.updateDataForItemIndex=function(ia,ja,ka){"use strict";if(ka){this._tagExpansionButton=ka;this.inform('CustomTagExpansion',this._tagExpansionButton);}var la=this._menu.getItemForIndex(ia);if(la.isCustomOption())la.setPostParam(ja);this._selectedOption=la;this._postParam=ja;l.setValue(this._input,ja);this._updateTriggerButtonLabel();if(this._shouldUpdateTooltips()){this._updateTooltipAfterChange();}else{if(this._isSavedOnSelect)this._savePrivacy();this._setTooltipValue(this._selectedOption.getTooltip());}this.inform('changed',{post_param:this._postParam,base_value:this.getSelectedBaseValue()});};ha.prototype._shouldUpdateTooltips=function(){"use strict";return this._prefixTooltipApps||this._supportsTagExpansion;};ha.prototype._savePrivacy=function(){"use strict";this._sendUpdateRequest();};ha.prototype._reloadSelector=function(){"use strict";var ia=new y().setInt('privacy_fbid',this._privacyFBID).setString('post_param',this._postParam).setInt('render_location',this._renderLocation).setBool('reload_selector',true).setInt('ent_id',this._entID).getURI();new h().setRelativeTo(this._button).setURI(ia).send();};ha.prototype._sendUpdateRequest=function(){"use strict";var ia=new y().setInt('privacy_fbid',this._privacyFBID).setString('post_param',this._postParam).setIntVector('tags',this._tags).setInt('render_location',this._renderLocation).setBool('is_saved_on_select',this._isSavedOnSelect).setBool('should_return_tooltip',this._shouldUpdateTooltips()).setBool('prefix_tooltip_with_app_privacy',this._prefixTooltipApps).setBool('replace_on_select',this._config.replace_on_select).setInt('ent_id',this._entID).setString('tag_expansion_button',this._tagExpansionButton).getURI();new h().setRelativeTo(this._button).setHandler(z(this,function(ja){if(this._isSelectorForChangingComposerDefault())this._broadcastUpdate();var ka=ja&&ja.payload&&ja.payload.tooltip;ka&&this._setTooltipValue(ja.payload.tooltip);})).setURI(ia).send();};ha.prototype.informTagsChanged=function(ia){"use strict";var ja=this._getTags(ia);this.informTagsChangedWithIDs(ja);};ha.prototype.informTagsChangedWithIDs=function(ia){"use strict";var ja=!ia.length;if(this._hasTags===ja){this._hasTags=!!ia.length;this._menu.updateOptionsAfterTagExpansion(this._showTagExpansion());this._updateTriggerButtonLabel();}if(this._tags.length!==ia.length){this._tags=ia;this._updateTooltipAfterChange();}};ha.prototype._showTagExpansion=function(){"use strict";return this._hasTags&&(this._tagExpansionButton.valueOf()===v.FRIENDS_OF_TAGGED.valueOf());};ha.prototype._getTags=function(ia){"use strict";var ja=[],ka=k.getID();if(ia.withTags)for(var la=0;la<ia.withTags.length;la++){var ma=ia.withTags[la].info;if(ma.uid!=ka)ja.push(ma.uid);}if(ia.mention)for(var na in ia.mention)if(ia.mention[na].type=='user'&&ia.mention[na].uid!=ka)ja.push(ia.mention[na].uid);return ja;};ha.prototype._updateTriggerButtonLabel=function(){"use strict";var ia=this._selectedOption.getTriggerIcon();i.setIcon(this._button,ia.cloneNode());if(!this._shouldDisplayLabel)return;o.setLabel(this._button,this._selectedOption.getLabel());if(this._config.trigger_style===da){j.conditionClass(this.getTriggerButtonElement(),"_mw-",this.getIsOnlyMeSelected());j.conditionClass(this.getTriggerButtonElement(),"_mw_",this.getIsPublicSelected());}};ha.prototype._updateTooltipAfterChange=function(){"use strict";var ia="\u0e01\u0e33\u0e25\u0e31\u0e07\u0e42\u0e2b\u0e25\u0e14...";this._setTooltipValue(ia);this._sendUpdateRequest();};ha.prototype._setTooltipValue=function(ia){"use strict";ia&&w.set(this._button,ia);};ha.prototype._onPopoverClose=function(){"use strict";if(!this._getSelectedOption())return;if(this._closeForCustom){this._closeForCustom=false;}else this.inform('selectorFinished');this.inform('close');};ha.prototype._onPopoverOpen=function(){"use strict";if(!(this._menu instanceof u))return;this._menu.onPopoverOpen(this._getSelectedOption());var ia=new x().setEnum('event','opened').setInt('render_location',this._renderLocation).setString('content_type',this._contentType).getURI();new h().setURI(ia).send();this.inform('open');};ha.prototype._onMenuLoad=function(){"use strict";this._menu.subscribe('itemclick',this._onItemClick.bind(this));this._popover.subscribe('hide',this._onPopoverClose.bind(this));this._popover.subscribe('show',this._onPopoverOpen.bind(this));this._menu.subscribe('expandMenu',function(){if(this._popover&&this._popover.getLayer())this._popover.getLayer().updatePosition();}.bind(this));this._selectedOption=this._getSelectedOption();if(this._selectedOption){this._postParam=this._selectedOption.getPostParam().toString();this._hasTags&&this._updateTriggerButtonLabel();}};e.exports=ha;},null);